var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function m(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function q(a){if(!(a instanceof Array)){a=m(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ca;
if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={na:!0},fa={};try{fa.__proto__=ea;da=fa.na;break a}catch(a){}da=!1}ca=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ca;
function r(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.pa=b.prototype}
function ia(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}
var ka="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},la="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function y(a,b){if(b){var c=la;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ka(c,a,{configurable:!0,writable:!0,value:b})}}
y("String.prototype.repeat",function(a){return a?a:function(a){var b=ia(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}});y("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});
y("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var g=b[c];if(g===a||Object.is(g,a))return!0}return!1}});y("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==ia(this,a,"includes").indexOf(a,c||0)}});
y("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=ia(this,a,"startsWith"),e=b.length,g=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var h=0;h<g&&c<e;)if(b[c++]!=a[h++])return!1;return h>=g}});y("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=ia(this,a,"endsWith");void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}});
y("String.fromCodePoint",function(a){return a?a:function(a){for(var b="",d=0;d<arguments.length;d++){var e=Number(arguments[d]);if(0>e||1114111<e||e!==Math.floor(e))throw new RangeError("invalid_code_point "+e);65535>=e?b+=String.fromCharCode(e):(e-=65536,b+=String.fromCharCode(e>>>10&1023|55296),b+=String.fromCharCode(e&1023|56320))}return b}});
y("String.prototype.codePointAt",function(a){return a?a:function(a){var b=ia(this,null,"codePointAt"),d=b.length;a=Number(a)||0;if(0<=a&&a<d){a|=0;var e=b.charCodeAt(a);if(55296>e||56319<e||a+1===d)return e;a=b.charCodeAt(a+1);return 56320>a||57343<a?e:1024*(e-55296)+a+9216}}});function ma(){ma=function(){};la.Symbol||(la.Symbol=na)}var na=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function oa(){ma();var a=la.Symbol.iterator;a||(a=la.Symbol.iterator=la.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ka(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return pa(aa(this))}});oa=function(){}}function pa(a){oa();a={next:a};a[la.Symbol.iterator]=function(){return this};return a}function qa(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
y("WeakMap",function(a){function b(a){this.a=(h+=Math.random()+1).toString();if(a){a=m(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(){}function d(a){qa(a,g)||ka(a,g,{value:new c})}function e(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof c)return a;d(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==
d.get(c)}catch(k){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var h=0;b.prototype.set=function(a,b){d(a);if(!qa(a,g))throw Error("WeakMap key fail: "+a);a[g][this.a]=b;return this};b.prototype.get=function(a){return qa(a,g)?a[g][this.a]:void 0};b.prototype.has=function(a){return qa(a,g)&&qa(a[g],this.a)};b.prototype.delete=function(a){return qa(a,g)&&qa(a[g],this.a)?delete a[g][this.a]:!1};return b});
y("Map",function(a){function b(){var a={};return a.G=a.next=a.head=a}function c(a,b){var c=a.a;return pa(function(){if(c){for(;c.head!=a.a;)c=c.G;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})}function d(a,b){var c=b&&typeof b;"object"==c||"function"==c?g.has(b)?c=g.get(b):(c=""+ ++h,g.set(b,c)):c="p_"+b;var d=a.f[c];if(d&&qa(a.f,c))for(a=0;a<d.length;a++){var e=d[a];if(b!==b&&e.key!==e.key||b===e.key)return{id:c,list:d,index:a,v:e}}return{id:c,list:d,
index:-1,v:void 0}}function e(a){this.f={};this.a=b();this.size=0;if(a){a=m(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(m([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||
"t"!=e.value[1]||!d.next().done?!1:!0}catch(p){return!1}}())return a;oa();var g=new WeakMap;e.prototype.set=function(a,b){a=0===a?0:a;var c=d(this,a);c.list||(c.list=this.f[c.id]=[]);c.v?c.v.value=b:(c.v={next:this.a,G:this.a.G,head:this.a,key:a,value:b},c.list.push(c.v),this.a.G.next=c.v,this.a.G=c.v,this.size++);return this};e.prototype.delete=function(a){a=d(this,a);return a.v&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.f[a.id],a.v.G.next=a.v.next,a.v.next.G=a.v.G,a.v.head=null,
this.size--,!0):!1};e.prototype.clear=function(){this.f={};this.a=this.a.G=b();this.size=0};e.prototype.has=function(a){return!!d(this,a).v};e.prototype.get=function(a){return(a=d(this,a).v)&&a.value};e.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return c(this,function(a){return a.key})};e.prototype.values=function(){return c(this,function(a){return a.value})};e.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=
d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});
y("Set",function(a){function b(a){this.a=new Map;if(a){a=m(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.a.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a(m([b]));if(!d.has(b)||1!=d.size||d.add(b)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),g=e.next();if(g.done||g.value[0]!=b||g.value[1]!=b)return!1;g=e.next();return g.done||g.value[0]==b||4!=g.value[0].x||
g.value[1]!=g.value[0]?!1:e.next().done}catch(h){return!1}}())return a;oa();b.prototype.add=function(a){a=0===a?0:a;this.a.set(a,a);this.size=this.a.size;return this};b.prototype.delete=function(a){a=this.a.delete(a);this.size=this.a.size;return a};b.prototype.clear=function(){this.a.clear();this.size=0};b.prototype.has=function(a){return this.a.has(a)};b.prototype.entries=function(){return this.a.entries()};b.prototype.values=function(){return this.a.values()};b.prototype.keys=b.prototype.values;
b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.a.forEach(function(d){return a.call(b,d,d,c)})};return b});
function z(a){var b;a.hasAttribute("mark")&&(b=a.getAttribute("mark"));a.hasAttribute("tmark")&&(b=a.getAttribute("tmark"));switch(a.nodeName){case "prolog":return new ra(new sa(a.firstElementChild.getAttribute("string")),[]);case "version":return new sa(a.getAttribute("string"));case "pragma":return ta(a);case "ppragma":b=new wa(a.getAttribute("pname"),null);a=m(a.children);for(var c=a.next();!c.done;c=a.next())b.data=z(c.value);return b;case "pragma-data":return new xa(a.textContent);case "rule":b=
new B(a.getAttribute("name"),ya(a.children),b);a=m(a.children);for(c=a.next();!c.done;c=a.next())c=c.value,"pragma"==c.localName&&b.j.push(ta(c)),"comment"==c.localName&&b.j.push(za(c));return b;case "alts":return ya(a.children);case "alt":b=new D;a=m(a.children);for(c=a.next();!c.done;c=a.next())b.add(z(c.value));return b;case "comment":return za(a);case "literal":return a.hasAttribute("string")?a=new E(a.getAttribute("string"),b,'"'):a.hasAttribute("hex")?(a=a.getAttribute("hex"),/^[A-Fa-f0-9]+$/.test(a)||
F("literal/@hex in the XML syntax must be a valid hexadecimal number. Provided:'"+a+"'","S06"),a=new Aa(a,b)):(F("<literal/> in the XML syntax must have one of @string|@hex"),a=void 0),a;case "insertion":return a.hasAttribute("string")?a=new G(a.getAttribute("string"),!1):a.hasAttribute("hex")?a=new G(a.getAttribute("hex"),!0):(F("<insertion/> in the XML syntax must have one of @string|@hex"),a=void 0),a;case "inclusion":return Ba(a,!1,b);case "exclusion":return Ba(a,!0,b);case "member":return Ca(a);
case "nonterminal":return new I(a.getAttribute("name"),b);case "option":return new Da(z(a.firstElementChild),b);case "repeat0":return b=new Ea(z(a.firstElementChild),b),2==a.children.length&&Fa(b,z(a.children[1])),b;case "repeat1":return b=new Ga(z(a.firstElementChild),b),2==a.children.length&&Fa(b,z(a.children[1])),b;case "sep":return new Ha(z(a.firstElementChild),b);default:F("Unknown element in ixml tree:"+a.nodeName)}}function ra(a,b){this.version=a;this.a=b}
ra.prototype.c=function(a){var b=a.ownerDocument.createElement("prolog");this.version&&this.version.c(b);this.a.forEach(function(a){return a.c(b)});a.append(b)};ra.prototype.flat=function(){var a="";this.version&&(a+=this.version.flat());this.a.forEach(function(b){return a+="\n"+b.flat()});return a};function sa(a){this.version=a;this.a=[]}sa.prototype.c=function(a){var b=a.ownerDocument.createElement("version");b.setAttribute("string",this.version);a.append(b);this.a.forEach(function(a){return a.c(b)})};
sa.prototype.flat=function(){return'ixml version "'+this.version+'".'};function J(a,b){this.I=a;this.data=b}function ta(a){var b=new J(a.getAttribute("pname"),null);a=m(a.children);for(var c=a.next();!c.done;c=a.next())b.data=z(c.value);return b}J.prototype.c=function(a){var b=a.ownerDocument.createElement("pragma");b.setAttribute("pname",this.I);this.data&&this.data.c(b);a.append(b)};J.prototype.flat=function(){var a="{["+this.I;this.data&&(a+=" "+this.data.flat());return a+"]}"};
function wa(a,b){J.call(this,a,b)}r(wa,J);wa.prototype.c=function(a){var b=a.ownerDocument.createElement("ppragma");b.setAttribute("pname",this.I);this.data&&this.data.c(b);a.append(b)};wa.prototype.flat=function(){var a="{[+"+this.I;this.data&&(a+=" "+this.data.flat());return a+"]}"};function xa(a){this.data=a}xa.prototype.c=function(a){var b=a.ownerDocument.createElement("pragma-data");b.textContent=this.data;a.append(b)};xa.prototype.flat=function(){return this.data};
function K(a){this.mark=a;this.f=[];this.H=!1}K.prototype.flat=function(a){return this.mark?this.mark:void 0===a?"":a};K.prototype.c=function(a){this.mark&&a.setAttribute("mark",this.mark)};function Ia(a){var b="";a.f.forEach(function(a){return b+=a.flat()});return b}function B(a,b,c){K.call(this,c);this.name=a;this.definition=b;this.definition.l+=" ";this.definition.ea=!1;this.j=[];this.f=[];this.a=[];this.w=this.lineNumber=null}r(B,K);B.prototype.K=function(a){this.f.push(a)};
B.prototype.c=function(a){var b=a.ownerDocument.createElement("rule");K.prototype.c.call(this,b);b.setAttribute("name",this.name);this.H&&b.setAttributeNS("http://invisiblexml.org/NS","ixml:artifact","true");this.j.forEach(function(a){return a.c(b)});this.a.forEach(function(a){return a.c(b)});this.f.forEach(function(a){return a.c(b)});a.append(b);this.definition.c(b,!0)};B.prototype.u=function(a){this.definition.u(a)};
function Ja(a){var b=a.name.length;a.j.forEach(function(a){return b+=a.flat().length});return b}B.prototype.flat=function(a){var b="\n"+" ".repeat(a-Ja(this));this.j.forEach(function(a){return b+=a.flat()});this.a.forEach(function(a){return b+=a.flat()});b+=K.prototype.flat.call(this," ")+this.name+": ";this.f.forEach(function(a){return b+=a.flat()});50<this.definition.flat().length&&!this.definition.l.includes("\n")&&(this.definition.l+="\n"+" ".repeat(a+3));return b+this.definition.flat()+". "};
function Ka(a){this.b=a}function za(a){var b=[];a=m(a.childNodes);for(var c=a.next();!c.done;c=a.next())c=c.value,c instanceof Element?b.push(za(c)):b.push(c.textContent);return new Ka(b)}Ka.prototype.c=function(a){var b=a.ownerDocument.createElement("comment");this.b.forEach(function(a){a instanceof Ka?a.c(b):b.append(new Text(a))});a.append(b)};Ka.prototype.flat=function(){var a="{";this.b.forEach(function(b){a=b instanceof Ka?a+b.flat():a+b});return a+"}"};
function La(a){K.call(this,a);this.l=this.h=null;this.b=[];this.a=[];this.ea=!1}r(La,K);f=La.prototype;f.add=function(a){this.b.push(a);this.a.push(a)};f.unshift=function(a){this.b.unshift(a);this.a.unshift(a)};f.K=function(a){this.a.push(a)};function Ma(a,b,c){var d=a.b.indexOf(b);a.b.splice.apply(a.b,[d,1].concat(q(c)));d=a.a.indexOf(b);a.a.splice.apply(a.a,[d,1].concat(q(c)))}f.replace=function(a,b){var c=this.b.indexOf(a);this.b[c]=b;c=this.a.indexOf(a);this.a[c]=b};
f.u=function(a,b){var c=this;a(this,b);this.b.forEach(function(b){return b.u(a,c)})};f.display=function(){return"container"};f.c=function(a,b){var c=a;b||(c=a.ownerDocument.createElement(this.h),a.append(c));a=m(this.a);for(b=a.next();!b.done;b=a.next())b.value.c(c,!1)};f.flat=function(){var a=this;if(1==this.b.length)return this.b[0].flat();var b="";this.a.forEach(function(c,d){b+=c.flat();!(c instanceof Ka)&&d<a.a.length-1&&(b+=a.l)});return this.ea?"("+b+")":b};
function L(){La.call(this,null);this.h="alts";this.l="|";this.ea=!0;this.w=this.lineNumber=null}r(L,La);function ya(a){var b=new L;a=m(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;if("alt"==d.localName){c=new D;b.add(c);d=m(d.children);for(var e=d.next();!e.done;e=d.next())c.add(z(e.value))}}return b}L.prototype.display=function(){return"()"};function D(){La.call(this,null);this.h="alt";this.l=",";this.ea=!1}r(D,La);function Na(){L.call(this);this.add(new D)}r(Na,L);
Na.prototype.c=function(a){L.prototype.c.call(this,a,!0)};function M(a,b){K.call(this,b);this.m=a;this.l=null;this.a="";this.f=[];this.w=this.lineNumber=this.o=this.h=null}r(M,K);function Fa(a,b){a.l=b;a.a+="-sep"}f=M.prototype;f.replace=function(a,b){this.m===a&&(this.m=b)};f.F=function(){return[]};f.ha=function(a){return this.F(a,void 0)};f.K=function(a){this.f.push(a)};
function P(a,b,c){if((void 0===c||c)&&a.m instanceof I)return a.m.A;if(a.h)return a.h+"_"+b;a.h=a.m instanceof I?a.m.A:"Mult";return a.h+"_"+b}f.u=function(a,b){a(this,b);this.m.u(a,this);this.l&&this.l.u(a,this)};f.c=function(a){var b=a;b=a.ownerDocument.createElement(this.o);a.append(b);this.m.c(b);this.f.forEach(function(a){return a.c(b)});this.l&&this.l.c(b)};
f.flat=function(a){var b=this.m.flat();!(this.m instanceof L)||b.startsWith("(")&&b.endsWith(")")||(b="("+b+")");b+=a;this.l?(b+=a,this.f.forEach(function(a){return b+=a.flat()}),b+=this.l.flat()):this.f.forEach(function(a){return b+=a.flat()});return b};function Oa(a,b){var c=new L;if(a.m instanceof L)a.m.b.forEach(function(a){d=new D;a.b.forEach(function(a){return d.add(a)});d.add(new I(b,null));c.add(d)});else{var d=new D;d.add(a.m);d.add(new I(b,null));c.add(d)}return c}
function Da(a,b){M.call(this,a,b);this.o="option";this.a="-option"}r(Da,M);Da.prototype.F=function(a,b){a=(b?b:P(this,a))+this.a;var c=new L;this.m instanceof L?this.m.b.forEach(function(a){return c.add(a)}):(b=new D,b.add(this.m),c.add(b));b=new D;b.add(new Na);c.add(b);a=new B(a,c,"-");a.H=!0;return[a]};Da.prototype.flat=function(){return M.prototype.flat.call(this,"?")};function Ea(a,b){M.call(this,a,b);this.o="repeat0";this.a="-star"}r(Ea,M);
Ea.prototype.ha=function(a){return this.l?Pa(this,a):this.F(a)};Ea.prototype.F=function(a){if(this.l)return Pa(this,a);a=P(this,a)+this.a;var b=Oa(this,a),c=new D;c.add(new Na);b.add(c);a=new B(a,b,"-");a.H=!0;return[a]};function Pa(a,b){P(a,b);var c=P(a,b)+"-plus";P(a,b);var d=new Ga(a.m,null);d.l=a.l;c=new Da(new I(c,null),null);c.a="-star-sep";var e=c.F(b,P(a,b));d.F(b).forEach(function(a){return e.push(a)});return e}Ea.prototype.flat=function(){return M.prototype.flat.call(this,"*")};
function Ga(a,b){M.call(this,a,b);this.o="repeat1";this.a="-plus"}r(Ga,M);Ga.prototype.ha=function(a){a=P(this,a)+this.a;var b=this.l,c=new L,d=new D;d.add(this.m);b&&d.add(b.m);d.add(new I(a,null));c.add(d);b=new D;b.add(this.m);c.unshift(b);a=new B(a,c,"-");a.H=!0;return[a]};
Ga.prototype.F=function(a){if(this.l){var b=P(this,a)+this.a,c=P(this,a,!1)+"-star";c=Oa(this,c);var d=new L,e=new D;e.add(this.l.m);e.add(this.m);d.add(e);d=new Ea(d,null);d.h=this.h;a=d.F(a);b=new B(b,c,"-");b.H=!0;a.unshift(b);return a}b=P(this,a)+this.a;c=P(this,a)+"-star";c=Oa(this,c);a=(new Ea(this.m,null)).F(a);b=new B(b,c,"-");b.H=!0;a.unshift(b);return a};Ga.prototype.flat=function(){return M.prototype.flat.call(this,"+")};function Ha(a,b){M.call(this,a,b);this.o="sep";this.a="-sep"}
r(Ha,M);Ha.prototype.flat=function(){return this.m.flat()};function Q(a){K.call(this,a);this.j=[]}r(Q,K);f=Q.prototype;f.c=function(a){this.mark&&a.setAttribute("tmark",this.mark);this.j.forEach(function(b){return b.c(a)})};f.K=function(a){this.j.push(a)};f.u=function(a,b){a(this,b)};f.matches=function(){return!1};f.flat=function(){var a="";this.j.forEach(function(b){a+=b.flat()});return a+K.prototype.flat.call(this)};function I(a,b){K.call(this,b);this.A=a;this.b=[];this.j=[]}r(I,K);f=I.prototype;
f.u=function(a,b){a(this,b)};f.display=function(){return K.prototype.flat.call(this)+this.A};f.c=function(a){var b=a.ownerDocument.createElement("nonterminal");K.prototype.c.call(this,b);b.setAttribute("name",this.A);a.append(b);this.j.forEach(function(a){return a.c(b)})};f.flat=function(){var a="";this.j.forEach(function(b){a+=b.flat()});return a+K.prototype.flat.call(this)+this.A};f.K=function(a){this.f.push(a)};
function G(a,b){this.a=b;this.text=a;this.value=b?String.fromCodePoint(parseInt(a,16)):a}G.prototype.u=function(a,b){a(this,b)};G.prototype.display=function(){return"+"+(this.a?"#"+this.text:'"'+this.value.replaceAll('"','""')+'"')};G.prototype.c=function(a){var b=a.ownerDocument.createElement("insertion");b.setAttribute(this.a?"hex":"string",this.text);a.append(b)};G.prototype.flat=function(){return this.display()};function Qa(a,b){return b+a.replaceAll(b,b+b)+b}
function E(a,b,c){Q.call(this,b);this.value=a;this.X=c}r(E,Q);E.prototype.matches=function(a){return this.value==a};E.prototype.display=function(){return Q.prototype.flat.call(this)+'"'+this.value.replaceAll('"','""')+'"'};E.prototype.c=function(a){var b=a.ownerDocument.createElement("literal");Q.prototype.c.call(this,b);b.setAttribute("string",this.value);a.append(b)};E.prototype.flat=function(){return Q.prototype.flat.call(this)+Qa(this.value,this.X)+Ia(this)};
function Aa(a,b){Q.call(this,b);this.text=a;this.a=parseInt(a,16);try{this.value=String.fromCodePoint(this.a)}catch(c){F("encoded character is not a valid Unicode point. Provided:'"+a+"'","S06")}}r(Aa,Q);Aa.prototype.matches=function(a){return this.a==a.codePointAt(0)};Aa.prototype.c=function(a){var b=a.ownerDocument.createElement("literal");Q.prototype.c.call(this,b);b.setAttribute("hex",this.text);a.append(b)};Aa.prototype.display=function(){return Q.prototype.flat.call(this)+"#"+this.text};
Aa.prototype.flat=function(){return Q.prototype.flat.call(this)+"#"+this.text+Ia(this)};function Ra(a){Q.call(this,a);this.b=[];this.a=[];this.h="charset"}r(Ra,Q);function Ba(a,b,c){b=b?new Sa(c):new Ta(c);a=m(a.children);for(c=a.next();!c.done;c=a.next())b.add(z(c.value));return b}f=Ra.prototype;f.add=function(a){this.b.push(a);this.a.push(a)};f.K=function(a){this.a.push(a)};f.u=function(a){this.b.forEach(function(b){return b.u(a)})};
f.c=function(a){var b=a.ownerDocument.createElement(this.h);Q.prototype.c.call(this,b);a.append(b);a=m(this.a);for(var c=a.next();!c.done;c=a.next())c.value.c(b,!1)};f.matches=function(a){for(var b=m(this.b),c=b.next();!c.done;c=b.next())if(c.value.matches(a))return!0;return!1};f.display=function(){return"["+this.b.map(function(a){return a.display()}).join(";")+"]"};
f.flat=function(){var a=this,b=Q.prototype.flat.call(this)+("exclusion"==this.h?"~":"")+"[";this.a.forEach(function(c,d){b+=c.flat();!(c instanceof Ka)&&d<a.a.length-1&&(b+=";")});return b+="]"+Ia(this)};function Ta(a){Ra.call(this,a);this.h="inclusion"}r(Ta,Ra);function Sa(a){Ra.call(this,a);this.h="exclusion"}r(Sa,Ra);Sa.prototype.matches=function(a){return!Ra.prototype.matches.call(this,a)};Sa.prototype.display=function(){return"~"+Ra.prototype.display.call(this)};
function R(){this.f=[];this.a=this.value=null}
function Ca(a){if(a.hasAttribute("string"))return new S(a.getAttribute("string"));if(a.hasAttribute("hex"))return new Ua(a.getAttribute("hex"));if(a.hasAttribute("code"))return new Va(a.getAttribute("code"));if(a.hasAttribute("from")){var b=a.getAttribute("from");a=a.getAttribute("to");return new Wa("#"==b[0]?new Ua(b.substring(1)):new S(b),"#"==a[0]?new Ua(a.substring(1)):new S(a))}F("<member/> in XML syntax must have one of @string|@hex|@code|(@from,@to)")}f=R.prototype;
f.u=function(a,b){a(this,b)};f.display=function(){return this.value};f.K=function(a){this.f.push(a)};f.c=function(a){var b=a.ownerDocument.createElement("member");b.setAttribute(this.a,this.value);a.append(b);this.f.forEach(function(a){return a.c(b)})};f.flat=function(){return this.f.map(function(a){return a.flat()}).join("")};function S(a,b){b=void 0===b?'"':b;R.call(this);this.value=a;this.a="string";this.X=b}r(S,R);S.prototype.ga=function(){return this.value.codePointAt(0)};
S.prototype.matches=function(a){return this.value.includes(a)};S.prototype.flat=function(){return Qa(this.value,this.X)+R.prototype.flat.call(this)};S.prototype.ia=function(){return this.value};function Ua(a){R.call(this);this.value=a;this.h=parseInt(a,16);this.a="hex"}r(Ua,R);f=Ua.prototype;f.ga=function(){return this.h};f.matches=function(a){return this.h==a.codePointAt(0)};f.display=function(){return this.flat()};f.flat=function(){return"#"+this.value+R.prototype.flat.call(this)};
f.ia=function(){return"#"+this.value};function Wa(a,b){R.call(this);(a instanceof S&&1!=a.value.length||b instanceof S&&1!=b.value.length)&&F("The start and end of a charset range must each be exactly one character","S09");this.o=a;this.W=b;this.h=a.ga();this.P=b.ga();this.P<=this.h&&F("The start character of a charset range must have a code point value less than that of the end","S09")}r(Wa,R);Wa.prototype.matches=function(a){a=a.codePointAt(0);return this.h<=a&&a<=this.P};Wa.prototype.display=function(){return this.flat()};
Wa.prototype.c=function(a){var b=a.ownerDocument.createElement("member");b.setAttribute("from",this.o.ia());b.setAttribute("to",this.W.ia());this.f.forEach(function(a){return a.c(b)});a.append(b)};Wa.prototype.flat=function(){return this.o.flat()+"-"+this.W.flat()+R.prototype.flat.call(this)};function Va(a){R.call(this);this.value=a;try{this.h=new RegExp("\\p{"+a+"}","u")}catch(b){F("'"+a+"' is not a valid Unicode character class","S10")}this.a="code"}r(Va,R);Va.prototype.matches=function(a){return this.h.test(a)};
Va.prototype.flat=function(){return this.value+R.prototype.flat.call(this)};function Xa(a,b,c,d,e,g){this.name=a;this.M=null;this.ended=c>=d.length;this.origin=b;this.position=c;this.s=0;this.b=d;this.index=0;this.aa=e;this.a=g;this.source=this.right=this.left=null}f=Xa.prototype;f.O=function(){var a=new Xa(this.name,this.origin,this.position+1,this.b,this.aa,this.a);a.s=this.s;a.M=this.M;return a};function Za(a,b,c){if(null==c||void 0==c)c=b.position;return a.name==b.name&&a.aa==b.aa&&a.position==c&&a.origin==b.origin}function U(a){return a.b[a.position-1]}
function V(a){return a.b[a.position]}function $a(a){return a.b[a.position]instanceof Q||a.b[a.position]instanceof G}f.matches=function(a){var b=this.b[this.position];return b instanceof Q&&b.matches(a)};f.ca=function(a){var b=this.b[this.position];return b instanceof I&&a.includes(b.A)};function ab(a){return a.position>=a.b.length}function bb(a,b,c,d,e){a.source=new cb(b,c,d,e)}
f.display=function(a){var b=this,c="("+this.index+")"+" ".repeat(void 0===a?0:a);c+=this.name+"\u2192";this.b.forEach(function(a,e){c+=(e==b.position?"\u25cf":"")+a.display()+(e<b.b.length-1?",":"")});this.position>=this.b.length&&(c+="\u25cf");return c};
f.c=function(a){function b(b){d=a.ownerDocument.createElement("td");var e=a.ownerDocument.createElement("pre");var h="description sppf";b instanceof db&&(h+=" derivation");e.setAttribute("class",h);b&&e.append(new Text(b.display()));d.append(e);c.append(d)}var c=a.ownerDocument.createElement("tr");0==this.origin&&ab(this)&&c.setAttribute("class","finished");a.append(c);var d=a.ownerDocument.createElement("td");d.append(new Text(""+this.index));c.append(d);d=a.ownerDocument.createElement("td");d.append(new Text(this.aa));
c.append(d);d=a.ownerDocument.createElement("td");d.append(new Text(""+this.s));c.append(d);d=a.ownerDocument.createElement("td");d.setAttribute("class","showDot");d.append(new Text(this.display()));c.append(d);d=a.ownerDocument.createElement("td");d.append(new Text(this.origin));c.append(d);d=a.ownerDocument.createElement("td");d.setAttribute("class","description");this.source?d.append(new Text(this.source.display())):d.append(new Text(this.a));c.append(d);b(this.left);b(this.right);return c};
function eb(a){return 0<(U(a)?U(a).j?U(a).j:[]:[]).filter(function(a){return a instanceof J&&"drop"==a.I}).length}
function fb(a,b,c,d){c=void 0===c?!1:c;var e="",g=V(a);d=void 0===d?!1:d;c&&g&&g.j&&0<g.j.length&&(console.log(a),console.log(g));eb(a)&&(d=!0);c&&g&&g.j&&0<g.j.filter(function(a){return a instanceof J&&"drop"==a.I}).length&&(d=!0);a.left&&(a.left instanceof Xa||F("left not a state:"+a.left),e+=fb(a.left,b,c,d));a.right&&(e+=fb(a.right,b,c,d));$a(a)&&"-"!=V(a).mark&&!d&&(e+=V(a)instanceof G?V(a).value:gb(b[a.s]));return e}
f.N=function(a,b,c,d,e,g,h,l){function n(d,h,k,n){n=void 0===n?l:n;return d?d.N(a,b,c,h,e,g,k,n):[]}l=void 0===l?!1:l;var w=this.s,k=U(this)?U(this).mark:null,p=U(this)?U(this).j?U(this).j:[]:[],u=!1,ja=!1,ua=!1,X=null,N=null,H=null;if(ab(this)){var va=this.name,A=b.get(va);d||(d=A.mark);w=null;g&&!A.H&&(w=d,d="^");A.j.concat(h).filter(function(a){return a instanceof J}).forEach(function(a){switch(a.I){case "abc":case "nur":u=!0;break;case "rename":N=a.data.data;break;case "name":X=a.data.data;break;
case "assert":a=a.data.data.split(">>>");H="if("+a[0]+") then () else error(QName('','err'),"+(a[1]?a[1]:"'Assertion ''"+a[0].trim()+"'' failed for rule ''"+va+"'' in:\n'|| string-join((serialize(.,map{'indent':true(),'omit-xml-declaration':true()})=>tokenize('\n'))!(' | '||.),'\n') || '\n'")+")";break;case "drop":ua=!0;break;case "discard":ja=!0}});d||(d="^");if(ua&&!l)return[];h=N?N:va;if(X||H){A=a.createElement(hb(h));var v=n(this.left,k,p,!0);var t=n(this.right,k,p,!0);W(v,A);W(t,A);X&&(h=SaxonJS.XPath.evaluate("string("+
X+")",A));H&&SaxonJS.XPath.evaluate(H,A)}switch(d){case "^":var C=a.createElement(hb(h));w&&C.setAttributeNS("http://invisiblexml.org/NS","ixml:mark",w);break;case "@":"xmlns"==h&&F("'xmlns' is not a valid name for an attribute","D07");C=a.createAttribute(hb(h));w="";w=fb(this,c,!0);C.value=w;break;case "+":w=U(this).value,gb(w),C=new Text(w)}v=n(this.left,k,p);t=n(this.right,k,p);u&&(u=1==(Array.isArray(v)?v.length:1)+(Array.isArray(t)?t.length:1));if(v instanceof Y){var x=new Y;if("-"==d){d=m(v.b);
for(k=d.next();!k.done;k=d.next())if(p=k.value,t instanceof Y)for(w=m(t.b),k=w.next();!k.done;k=w.next())x.add(p.concat(k.value));else x.add(p.concat(ib(t)));return x}v.b.forEach(function(a){var b=C.cloneNode();if(b instanceof Element)if(t instanceof Y){var c=m(t.b);for(b=c.next();!b.done;b=c.next()){var d=b.value;b=C.cloneNode();W(a,b,!0);W(d,b,!0);x.add([b])}}else W(a,b,!0),W(t,b,!0),x.add([b]);else x.add(a.concat([b],ib(t)))});return x}if(t instanceof Y){x=new Y;if("-"==d)return t.b.forEach(function(a){return x.add(ib(v).concat(a))}),
x;t.b.forEach(function(a){var b=C.cloneNode();if(b instanceof Element){var c=[];a.forEach(function(a,b){Array.isArray(a)&&c.push(b)});var d=c.length;if(0<d)for(var e={S:0};e.S<d;e={S:e.S},e.S++)b=C.cloneNode(),W(v,b,!0),a.forEach(function(a){return function(d,e){Array.isArray(d)&&c[a.S]!=e||W(d,b,!0)}}(e)),x.add([b]);else W(v,b,!0),W(a,b,!0),x.add([b])}else x.add(ib(v).concat([b],a))});return x}if(u)return v.concat(t);if(ja&&Array.isArray(v)&&0==v.length&&Array.isArray(t)&&0==t.length)return[];switch(d){case "^":return W(v,
C),W(t,C),[C];case "-":return v.concat(t);default:return[C]}}else{v=n(this.left,k,p);t=n(this.right,k,p);var T=[];$a(this)&&(d=V(this),k=V(this)?V(this).mark?V(this).mark:"^":"-",d&&d.j&&0<d.j.filter(function(a){return a instanceof J&&"drop"==a.I}).length&&(k="-"),V(this)instanceof G?(d=V(this).value,gb(d),g?(k=a.createElementNS("http://invisiblexml.org/NS","ixml:insertion"),k.setAttribute("string",d),T.push(k)):T.push(new Text(d))):"^"==k&&T.push(new Text(gb(c[w]))));if(t instanceof Y){x=new Y;d=
m(t.b);for(k=d.next();!k.done;k=d.next())if(k=k.value,v instanceof Y)for(p=m(v.b),w=p.next();!w.done;w=p.next())x.add(w.value.concat(k));else x.add(ib(v).concat(k,T));return x}if(v instanceof Y)return x=new Y,v.b.forEach(function(a){return x.add(a.concat(ib(t),T))}),x;d=v.concat(t);k=0<d.length?d[d.length-1]:null;return T[0]instanceof Text&&k instanceof Text?(k.textContent+=T[0].textContent,d):d.concat(T)}};
function hb(a){try{SaxonJS.atom(a,"NCName")}catch(b){F("'"+a+"' is not a valid name for an XML element","D03")}return a}function gb(a){for(var b=m([].concat(q(a))),c=b.next();!c.done;c=b.next())c=c.value.codePointAt(0),(32>c&&![9,10,13].includes(c)||55295<c&&57344>c||65533<c&&65536>c||1114111<c)&&F("Character codepoint "+c+" in '"+a+"' is not a valid XML character","D04");return a}function db(a,b,c){this.left=a;this.right=b;this.next=c}
db.prototype.display=function(a){a=void 0===a?0:a;var b=" ".repeat(a);b+="DER:";this.left&&(b+=this.left.display(),b+="\n");this.right&&(b+=this.right.display(a+4),b+="\n");this.next&&(b+=" ".repeat(a)+"|OR|"+this.next.display(a+4));return b};
db.prototype.N=function(a,b,c,d,e,g,h){var l=this.left.N(a,b,c,null,e,g,h);d=this.right?this.right.N(a,b,c,null,e,g,h):[];if(this.next){var n=new Y;d instanceof Y?d.b.forEach(function(a){return n.add(ib(l).concat(a))}):n.add(ib(l).concat(ib(d)));if(e)return n;a=this.next.N(a,b,c,null,!1,g,h);a instanceof Y?a.b.forEach(function(a){return n.add(a)}):n.add(a);return n}return d instanceof Y?d:l instanceof Y?l:l.concat(d)};
function ib(a){a instanceof Y&&Array.isArray(a.b[0])&&F("Trying to add arrays in ambiguity:"+a.b[0]);return a instanceof Y?a.b:a}function Y(){this.b=[]}Y.prototype.add=function(a){Array.isArray(a)&&Array.isArray(a[0])&&F("Adding an array to an ambiguity:"+a);this.b.push(a)};function W(a,b,c){c=void 0===c?!1:c;Array.isArray(a)?a.forEach(function(a){return jb(a,b,c)}):jb(a,b,c)}
function jb(a,b,c){c=void 0===c?!1:c;Array.isArray(a)&&F("Internal error: node is array: "+a);c=c?a.cloneNode(!0):a;c instanceof Attr?(b.hasAttribute(a.name)&&F("Attempt to overwrite an existing attribute @"+c.name+" on element "+b.localName,"D02"),b.setAttributeNode(c)):c instanceof Text?(a=b.lastChild,a instanceof Text?a.textContent+=c.textContent:0<c.textContent.length&&b.append(c)):b.append(c)}
function kb(a,b,c){if(b||c)if(a.left||a.right)if(a.right)Za(a.left,b)&&c&&a.right&&Za(a.right,c)||(a.left=new db(b,c,new db(a.left,a.right,null)),a.right=null);else a:{for(var d=a.left;d;){if(Za(d.left,b)&&c&&d.right&&Za(d.right,c))break a;d=d.next}a.left=new db(b,c,a.left)}else a.left=b,a.right=c}function cb(a,b,c,d){this.type=a;this.a=b;this.f=c;this.h=d}
cb.prototype.display=function(){var a=this.type+" from ";null!=this.a&&(a+="("+this.a+")");null!=this.f&&(null!=this.a&&(a+=" and "),a+="S("+this.f+")("+this.h+") ");return a};function lb(a,b,c){this.D=[];this.f=a;this.C=b;this.o=c;this.J=c.J;this.h=new Map;this.a=[]}f=lb.prototype;f.add=function(a){this.D.push(a);a.index=this.D.length};function mb(a,b){return a.D.some(function(a){return Za(a,b,a.position+1)})}function nb(a,b){return a.D.some(function(a){return Za(a,b)})}
function ob(a,b){return a.D.filter(function(a){return Za(a,b)})[0]}function pb(a,b,c){return a.D.filter(function(a){return a.name==b&&a.ended&&a.origin==c&&(!a.source||"scanned"!=a.source.type)})}f.O=function(){return new lb(this.f,this.C+1,this.o)};function tb(a,b){var c=a.J.get(b),d=c.definition.b.map(function(a,d){a=new Xa(b,0,0,a.b,d,"start rule");a.M=c;return a});d.forEach(function(b){return a.add(b)});ub(a,b,0);d.forEach(function(b){return a.a.push(b)})}
function ub(a,b,c){if(a.h.has(b))a.h.get(b).add(c);else{var d=new Set;d.add(c);a.h.set(b,d)}}function vb(a,b,c){return a.h.has(b)?a.h.get(b).has(c):!1}function wb(a){if(0==a.a.length)return!1;var b=a.a.shift();ab(b)?xb(a,b,a.C):(b.b[b.position]instanceof I||b.b[b.position]instanceof Na||b.b[b.position]instanceof G||"+"==b.b[b.position].mark)&&yb(a,b,a.C);return!0}function zb(a,b){var c=[];a=m(a.D);for(var d=a.next();!d.done;d=a.next())d=d.value,d.name==b&&ab(d)&&0==d.origin&&c.push(d);return c}
function Ab(a){return a.D.filter(function(a){return $a(a)})}
function yb(a,b,c){var d=V(b);if(d instanceof Na||d instanceof G||"+"==d.mark){var e=b.O();e.s=b.s;bb(e,"predict",b.index,null,null);if(ab(e)||"+"==d.mark||d instanceof G)bb(e,"Apredict/complete",b.index,null,null),kb(e,b,null);nb(a,e)||(a.add(e),a.a.push(e))}else if(d instanceof I){var g=d.A;if(vb(a,g,b.origin))g==b.name&&c==b.origin&&b.position==b.b.length?F("Infinite ambiguity with production: "+b.name):(d=pb(a,g,b.origin),0==d.length&&(d=pb(a,g,c).filter(function(a){return U(a)instanceof G})),
d.forEach(function(c){e=b.O();e.s=b.s;bb(e,"Known state predict/complete",b.index,a.C,c.index);kb(e,b,c);a.add(e);a.a.push(e)}));else{ub(a,g,b.origin);var h=a.J.get(g);h.definition.b.forEach(function(d,n){e=new Xa(g,c,0,d.b,n,"predict from ("+b.index+")");e.s=b.s;bb(e,"predict",b.index,null,null);e.M=h;n=V(e);if(ab(e)||n instanceof L)e=e.O(),e.s=b.s,bb(e,"Bpredict/complete",b.index,null,null),n instanceof L||d instanceof D||d instanceof I||kb(e,b,null);nb(a,e)?(e.index=-ob(a,b).index,bb(e,"Known state predict",
-b.index,null,null)):a.add(e);a.a.push(e)})}}}function xb(a,b,c){var d=b.name;a.o.Y[b.origin].D.forEach(function(e){if(e.ca([d],c)&&!mb(a,e)){var g=e.O();g.s=b.s;bb(g,"complete",b.index,b.origin,e.index);if(nb(a,g)){var h=ob(a,g);kb(h,e,Za(b,h)?null:b)}else a.add(g),kb(g,e,b);a.a.push(g)}})}function Bb(a,b,c,d){var e=!1;d.D.forEach(function(g,h){if(g.matches(c)){e=!0;var l=g.O();g.s=b;l.s=b;bb(l,"scanned",null,d.C,h+1);kb(l,g,null);a.add(l);a.a.push(l)}});return e}
f.display=function(){var a=document.implementation.createDocument("","",null);this.c(a);return a};f.countStates=function(){return this.D.length};
f.c=function(a){var b=this,c=a.createElement("table");a.append(c);var d=a.createElement("thead");c.append(d);var e=a.createElement("tr");d.append(e);var g=a.createElement("th");g.setAttribute("colspan","5");g.setAttribute("class","stateSpace");e.append(g);e="S("+this.C+"): "+(80<this.f.length?"":this.f.slice(0,this.C).join("")+"\u2022"+this.f.slice(this.C).join(""));if(0<this.C){var h=this.f[this.C-1].codePointAt(0);e+=" char '"+this.f[this.C-1]+"' (codepoint "+h+",#"+(new Number(h)).toString(16)+
")"}g.append(new Text(e));e=a.createElement("tr");d.append(e);d=a.createElement("td");d.setAttribute("colspan","3");e.append(d);var l=a.createElement("tbody");c.append(l);this.D.forEach(function(a){return a.c(l,b.C)})};
function Cb(a){var b=this;this.version=1;this.b=[];this.a=[];this.start=null;this.J=new Map;a.forEach(function(a){a instanceof B?Db(b,a):(b.b.push(a),a instanceof ra&&a.version&&(b.version=a.version.version))});this.Y=[];this.h=null;this.o=[];this.f={};this.compiled=!1;this.parseTime=this.compileTime=null}function Db(a,b){a.J.has(b.name)&&F("Adding productions for an already-defined non-terminal: "+b.name,"S03");a.a.push(b);a.b.push(b);a.J.set(b.name,b)}f=Cb.prototype;
f.ca=function(a,b){var c=[];a.u(function(a){a.A&&!b.has(a.A)&&(b.add(a.A),c.push(a.A))});return c};
function Eb(a){a.start=a.a[0].name;var b=new Set;a.a.forEach(function(a){return b.add(a.name)});for(var c=new Set,d=m(a.a),e=d.next();!e.done;e=d.next())a.ca(e.value,c);c=new Set([].concat(q(c)).filter(function(a){return!b.has(a)}));0<c.size&&!a.f.ma&&F("No production rules for non-terminals: "+[].concat(q(c)).join(","),"S02");if(a.f.oa){var g=Fb(a);a=new Set([].concat(q(b)).filter(function(a){return!g.has(a)}));0<a.size&&F("Unreachable production rules for non-terminals: "+[].concat(q(a)).join(","),
"S002")}}function Fb(a){var b=new Set,c=a.a[0];b.add(c.name);c=[c.name];for(var d={};0<c.length;)d.T=[],c.forEach(function(c){return function(d){d=a.J.get(d);c.T=c.T.concat(a.ca(d,b))}}(d)),c=d.T,d={T:d.T};return b}
f.compile=function(a){function b(b){return a instanceof SaxonJS.XdmMap?(b=SaxonJS.atom(b),a.containsKey(b)?a.get(b)[0].value:!1):a.hasOwn(b)?a[b]:!1}a.value&&(a=a.value);var c=performance.now(),d=b("twRewrites");this.f.oa=b("unreachable");this.f.da=b("pragmas");this.f.ma=b("missing");Eb(this);Gb(this);Hb(this,d);Ib(this);Eb(this);this.compileTime=performance.now()-c;this.compiled=!0};
function Gb(a){for(var b=[],c={},d=m(a.a),e=d.next();!e.done;c={U:c.U},e=d.next())c.U=e.value,c.U.u(function(a){return function(c,d){d&&c instanceof L&&(d.replace(c,new I("Alt"+b.length,null)),c.lineNumber=a.U.lineNumber,c.w=a.U.w,b.push(c))}}(c));b.forEach(function(b,c){c=new B("Alt"+c,b,"-");c.H=!0;c.lineNumber=b.lineNumber;c.w=b.w;Db(a,c)})}
function Ib(a){a=m(a.a);for(var b=a.next();!b.done;b=a.next())b.value.u(function(a,b){if(a instanceof D){var c=a.b.filter(function(a){return a instanceof E});b=m(c);for(c=b.next();!c.done;c=b.next()){var d=c.value,h=[],l=m(d.value);for(c=l.next();!c.done;c=l.next())h.push(new E(c.value,d.mark,d.X));c=a.b.indexOf(d);a.b.splice.apply(a.b,[c,1].concat(q(h)));c=a.a.indexOf(d);a.a.splice.apply(a.a,[c,1].concat(q(h)))}}else if(b&&a instanceof E&&"+"!=a.mark&&1<a.value.length){d=[];h=m(a.value);for(c=h.next();!c.done;c=
h.next())d.push(new E(c.value,a.mark,a.X));Ma(b,a,d)}})}
function Hb(a,b){for(var c=[],d=new Set,e={},g=m(a.a),h=g.next();!h.done;e={V:e.V},h=g.next())e.V=h.value,e.V.u(function(a){return function(b,e){if(b instanceof M){var g=new I(P(b,c.length)+b.a,null);b.lineNumber=a.V.lineNumber;b.w=a.V.w;e.replace(b,g);d.has(g.A)||(c.push(b),d.add(g.A))}}}(e));0<c.length&&c.forEach(function(c,d){b?c.ha(d).forEach(function(b){b.lineNumber=c.lineNumber;b.w=c.w;Db(a,b)}):c.F(d).forEach(function(b){b.lineNumber=c.lineNumber;b.w=c.w;Db(a,b)})})}
function Jb(a,b){a.h=b;a.o=b.split(/\n/)}function Kb(a,b){for(var c=1,d=1,e=0;e<b;e++)d++,/\n/.test(a.h[e])&&(c++,d=1);return{line:c,L:d}}
f.parse=function(a,b){function c(a){return b instanceof SaxonJS.XdmMap?(a=SaxonJS.atom(a),b.containsKey(a)?b.get(a)[0].value:!1):b.hasOwn(a)?b[a]:!1}function d(a){a.hasAttribute("xmlns:ixml")||a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:ixml","http://invisiblexml.org/NS")}function e(a){d(a);a.setAttributeNS("http://invisiblexml.org/NS","ixml:state","ambiguous")}function g(a){d(a);a.setAttributeNS("http://invisiblexml.org/NS","ixml:state","version-mismatch")}function h(a){var b=a[0];b instanceof
Attr&&F("An attribute node may not be the final parse result @"+b.name,"D05");b instanceof Text&&F("A text node may not be the final parse result: '"+b.textContent+"'","D06");1<a.length&&F("Multiple nodes may not be the final parse result:"+a.map(function(a){a:{switch(a.nodeType){case Node.ELEMENT_NODE:a="<"+a.tagName+"/>";break a;case Node.ATTRIBUTE_NODE:a="@"+a.name;break a;case Node.TEXT_NODE:a="'"+a.textContent+"'";break a}a=void 0}return a}),"D06")}b=void 0===b?{}:b;this.compiled||F("An IXML grammar must be compiled before being used to parse");
b.value&&(b=b.value);var l="1.0"!=this.version,n=performance.now(),w=[].concat(q(a));Jb(this,a);this.Y=[];var k=0,p=new lb(w,k++,this);this.Y.push(p);var u=null;tb(p,this.start);var ja=!0,ua=0;try{for(;ja;){if(1E3<ua++){F("Looping at start?");break}ja=wb(p)}}catch(O){O.message&&"looping in process"!=O.message&&(u=O.message)}var X=p;if(!u)for(var N={},H=0;H<w.length;N={Z:N.Z},H++){p=new lb(w,k++,this);this.Y.push(p);if(!Bb(p,H,w[H],X)){k=Kb(this,H);u="Failure at line "+k.line+" column "+k.L+"\nGiven '"+
a[H]+"' (codepoint "+a[H].codePointAt(0)+"). Expecting one of:\n";N.Z=new Set;Ab(X).forEach(function(a){return function(b){var c=V(b);c instanceof G||(b=b.M.lineNumber?" {#"+b.M.lineNumber+": "+b.M.w+"}":" {generated rule:"+b.name+" (see compiled grammar)}",a.Z.add("   "+c.display()+b))}}(N));u+=[].concat(q(N.Z)).join(",\n");u+="\nInput:\n   "+this.o[k.line-1]+"\n   ";u+=" ".repeat(k.L-1)+"^\n";break}ja=!0;ua=0;try{for(;ja;){if(1E3<ua++){var va=Kb(this,H);F("Probable looping processing character '"+
w[H]+"' @ line "+va.line+", column "+va.L);break}ja=wb(p)}}catch(O){u=O.message;break}X=p}a=performance.now()-n;N=c("justOne");H=c("suppressMarks");k=[];p=zb(p,this.start);if(!u&&0<p.length){X=1<p.length;var A=document.implementation.createDocument("","",null);A=document.implementation.createDocument("","",null);try{for(var v=m(p),t=v.next();!t.done;t=v.next()){var C=t.value.N(A,this.J,w,null,N,H,[]);if(C instanceof Y)for(var x=m(C.b),T=x.next();!T.done;T=x.next()){var Ya=T.value;e(Ya[0]);var qb=
document.implementation.createDocument("","",null);k.push(qb);h(Ya);qb.append(Ya[0].cloneNode(!0));if(N)break}else{X&&e(C[0]);l&&g(C[0]);var rb=document.implementation.createDocument("","",null);k.push(rb);h(C);rb.append(C[0].cloneNode(!0))}if(N)break}}catch(O){O.code?u={code:"string"==typeof O.code?O.code.substring(O.code.indexOf("}")+1):O.code,message:O.message}:u="Possible internal error: "+O.stack,p=[]}A=k[0]}else if(!u){u="\nEnd of input reached before parse completed.\nExpecting one of:\n    ";
var sb=new Set;Ab(X).forEach(function(a){var b=V(a);b instanceof G||sb.add(a.name+":"+b.display())});u+=[].concat(q(sb)).join(", ")+"\n"}l={parsed:0<p.length,tree:A,allTrees:k,states:this.Y,parseTime:a,treeTime:performance.now()-n-a,compileTime:this.compileTime};u&&(l.failed=u,l.allTrees=null,n=A=document.implementation.createDocument("","",null),l.tree=n,A=n.createElement("ixml"),n.append(A),d(A),A.setAttributeNS("http://invisiblexml.org/NS","ixml:state","failed"),u.code?(l.failed=u.message,l["error-code"]=
u.code,A.setAttributeNS("http://invisiblexml.org/NS","ixml:error-code",u.code),A.append(new Text("\n"+u.message))):A.append(new Text("\n"+u)));return l};f.flat=function(){for(var a="",b=this.b.reduce(function(a,b){return b instanceof B&&Ja(b)>a?Ja(b):a},0),c=m(this.b),d=c.next();!d.done;d=c.next()){d=d.value;if(d instanceof Ka||d instanceof ra)a+="\n";a+=d.flat(b)}return a};f.display=function(a){if(a)return this.flat();a=document.implementation.createDocument("","",null);this.c(a);return a};
f.c=function(a){var b=a.createElement("ixml");this.start&&b.setAttribute("startTerm",this.start);a.append(b);a=m(this.b);for(var c=a.next();!c.done;c=a.next())c.value.c(b)};
var Nb={compile:function(a,b){a instanceof Document||a instanceof DocumentFragment?(a=Lb(a,b),a.compile(b),b=a):(a=a instanceof Node?a.textContent:a,a=(new Mb(b)).parse(a),a.compile(b),b=a);return b},parse:function(a,b){a instanceof Document||a instanceof DocumentFragment?b=Lb(a,b):(a=a instanceof Node?a.textContent:a,b=(new Mb(b)).parse(a));return b},version:function(){return"1.0.1"}};window.jwiXML=function(){return Nb};function Ob(){this.h="";this.P=this.a=0;this.f=this.lineNumber=1;this.o=null;this.line="";this.W=null;this.la=[]}f=Ob.prototype;f.ba=function(){return this.a};f.ka=function(){this.la.push({offset:this.a,line:this.lineNumber,L:this.f})};f.ja=function(){var a=this.la.pop();this.a=a.offset;this.lineNumber=a.line;this.f=a.L};f.$=function(a){for(;a--;)this.next()};f.g=function(){return this.h.charAt(this.a)};f.R=function(){return this.a<this.P};f.startsWith=function(a){return this.h.substring(this.a).startsWith(a)};
f.next=function(){this.a==this.P&&F("End of input");this.a+=1;this.o=this.h.charAt(this.a);this.line+=this.o;/\n/.test(this.o)&&(this.lineNumber++,this.f=0,this.line="");this.f++;return this.o};f.matches=function(a){return this.h.substring(this.a).match(a)};f.location=function(){return{line:this.lineNumber,L:this.f}};function Pb(a){return(a=a.g())?"'"+a+"' (codepoint "+a.codePointAt(0)+")":"(no character)"}
f.B=function(a,b){a!=this.g()&&this.i((void 0===b?"":b)+"\nExpecting character:'"+a+"' - given: "+Pb(this),"G000");this.next()};f.fa=function(a,b){b=void 0===b?"":b;a.includes(this.g())||(a=a.split("").map(function(a){return"'"+a+"'"}).join(","),this.i(b+"\nExpecting one of "+a+" - given: "+Pb(this),"G000"));this.next()};
f.i=function(a,b){b=void 0===b?"ABCD":b;var c=this.location();a+=".\nNear "+("line "+this.lineNumber+", column "+this.f)+".\n";a+=this.W[c.line-1]+"\n";a+=" ".repeat(c.L-1)+"^\n";F(a,b)};function F(a,b){var c=void 0===c?null:c;a=new SaxonJS.XError(a,"Q{http://invisiblexml.org/NS}"+(void 0===b?"ABCD":b));c&&(a.qa=c.line);throw a;}
function Lb(a,b){new Mb(b);b=performance.now();(a instanceof Document||a instanceof DocumentFragment)&&"ixml"==a.firstChild.nodeName||F("An ixml grammar in XML format must be supplied as a document-node(element(ixml))");var c=[];a=m(a.firstChild.children);for(var d=a.next();!d.done;d=a.next())c.push(z(d.value));c=new Cb(c);c.parseTime=performance.now()-b;return c}
function Mb(a){function b(b){return a instanceof SaxonJS.XdmMap?(b=SaxonJS.atom(b),a.containsKey(b)?a.get(b)[0].value:!1):a.hasOwn(b)?a[b]:!1}this.f=this.a=null;a.value&&(a=a.value);this.da=b("pragmas");this.ma=b("missing")}f=Mb.prototype;f.i=function(a,b){this.a.i(a,void 0===b?"G000":b)};f.ba=function(){return this.a.ba()};f.R=function(){return this.a.R()};f.g=function(){return this.a.g()};f.startsWith=function(a){return this.a.startsWith(a)};f.next=function(){return this.a.next()};
f.B=function(a,b){return this.a.B(a,b)};f.fa=function(a,b){return this.a.fa(a,b)};function Qb(a,b){b.split("").forEach(function(b){a.B(b,"Invalid pragma syntax. ")})}f.matches=function(a){return this.a.matches(a)};f.ka=function(){this.a.ka()};f.ja=function(){this.a.ja()};f.$=function(a){this.a.$(a)};function Rb(a,b){for(var c="",d=a.g();d!=b;)c+=d,a.R()||a.i("Unterminated string "+b+"..."),d=a.next();return c}
f.parse=function(a){var b=performance.now();this.f=a;var c=new Ob;this.a=c;c.h=a;c.P=a.length;c.W=a.split(/\n/);a.startsWith("\n")&&c.lineNumber++;try{var d=Z(this),e;a=[];switch(this.g()){case "i":var g=Sb(this)}g&&Z(this);if(this.startsWith("{[+"))for(g||this.i("A prolog must contain a declaration of iXML version");this.startsWith("{[+");)a.push(Tb(this,!0));(e=g||0<a.length?new ra(g,a):null)&&d.push(e);for(e=[];this.R();)e.push(Ub(this)),this.R()&&(e=e.concat(Vb(this)));d=d.concat(e);d=d.concat(Z(this));
var h=new Cb(d);h.parseTime=performance.now()-b;return h}catch(l){if(l instanceof SaxonJS.XError)throw l;this.i(l.message,l.code)}};function Wb(a){for(var b=a.g();/\s/.test(b);)b=a.next()}function Z(a,b){b=void 0===b?null:b;for(var c=[],d=a.g();/\s/.test(d);)d=a.next();"{"!=d||a.da&&a.startsWith("{[")||(c.push(Xb(a)),Z(a).forEach(function(a){return c.push(a)}));b&&c.forEach(function(a){return b.K(a)});return c}
function Yb(a){for(var b=[],c=a.g();/\s/.test(c);)c=a.next();for(;"{"==c;)for(b.push(a.da&&a.startsWith("{[")?Tb(a):Xb(a)),c=a.g();/\s/.test(c);)c=a.next();return b}function Vb(a){var b=void 0===b?null:b;var c=a.g();if(/\s|\{/.test(c))return Z(a,b);a.i("Must have whitespace, given: '"+c+"' codepoint("+c.codePointAt(0)+")","S01")}
function Xb(a){var b=[],c="";a.B("{","Invalid comment syntax");for(var d=a.g();"}"!=d;)"{"==d?(""!=c&&b.push(c),b.push(Xb(a)),c="",d=a.g()):(c+=d,a.R()||a.i("Unterminated comment"),d=a.next());""!=c&&b.push(c);a.B("}","Invalid comment syntax");return new Ka(b)}
function Sb(a){a.ka();var b=a.matches(/ixml/);if(b&&(a.$(b[0].length),/\s|\{/.test(a.g()))){var c=Vb(a);if(b=a.matches(/version/)){a.$(b[0].length);c=c.concat(Vb(a));/'|"/.test(a.g())||a.i("Invalid version declaration","G000");b=Zb(a,a.g());c=c.concat(Z(a));a.B(".","Invalid version declaration. ");var d=new sa(b.value);c.forEach(function(a){return d.a.push(a)});return d}}a.ja();return null}
function Tb(a,b){b=void 0===b?!1:b;Qb(a,b?"{[+":"{[");var c=$b(a);var d=a.g();":"==d&&(c+=d,a.next(),c+=$b(a));d=null;if(/\s/.test(a.g())){Wb(a);d="";for(var e=a.g();!/\]/.test(e);)d+=e,"{"==e&&(a.next(),e=ac(a),d+=e.data+"}"),e=a.next();d=new xa(d)}Qb(a,"]}");Wb(a);return b?new wa(c,d):new J(c,d)}function ac(a){for(var b="",c=a.g();!/\}/.test(c);)b+=c,"{"==c&&(a.next(),c=ac(a),b+=c.data+"}"),c=a.next();return new xa(b)}
function Ub(a){var b=null,c=[],d=a.g(),e=a.ba();c=Yb(a);d=a.g();/@|-|\^/.test(d)&&(b=d,d=a.next(),Z(a).forEach(function(a){return c.push(a)}));d=$b(a);Z(a).forEach(function(a){return c.push(a)});a.fa(":=","Invalid rule syntax. Missing name-definition separator.");Z(a).forEach(function(a){return c.push(a)});var g=bc(a);c=c.concat(Yb(a));a.B(".","Invalid rule syntax. Missing rule terminator character.");b=new B(d,g,b);b.w=a.f.substring(e,a.ba());b.j=c;b.lineNumber=a.a.lineNumber;return b}
function $b(a){var b=a.g();(new RegExp(/\p{L}|_/,"u")).test(b)||a.i("'"+b+"' (codepoint "+b.codePointAt(0)+") is not a valid name character");var c=b;for(b=a.next();/\w|\-/.test(b);)c+=b,b=a.next();return c}function bc(a){var b=null,c=new L,d=a.g(),e;/;|\|/.test(d)?e=new Na:e=cc(a);e&&c.add(e);for(d=a.g();/;|\|/.test(d);)b||(b=d),a.next(),Z(a,c),d=a.g(),/;|\|/.test(d)?c.add(new Na):(c.add(cc(a)),Z(a,c),d=a.g());b&&(c.l=b);return c}
function cc(a){var b=new D,c=dc(a);c&&b.add(c);for(c=a.g();/,/.test(c);)a.next(),Z(a,b),(c=dc(a))||a.i("Invalid start of term"),b.add(c),c=a.g();return b}
function dc(a){var b=a.g(),c=null,d=[];a.da&&a.startsWith("{[")&&(d=Yb(a),b=a.g());/@|-|\^|\+/.test(b)&&(c=b,b=a.next(),Z(a),b=a.g());if("+"==c)return ec(a);switch(b){case "(":c&&a.i("No marker permitted on bracketed constructs (factor), given '"+c+"'","S006");var e=fc(a);break;case ")":return null;case '"':e=Zb(a,b);break;case "'":e=Zb(a,b);break;case "#":e=gc(a);break;case "[":e=hc(a,!1);break;case "~":a.next();Z(a);e=hc(a,!0);break;case ".":break;default:e=ic(a)}c&&(e instanceof Q&&"@"==c&&a.i("The only permitted mark for a terminal is '-', '+' or '^', given '"+
c+"'","S04"),"+"!=c||e instanceof Q&&!(e instanceof Ra)||a.i("The insertion mark '+' is only permitted on quoted or encoded literals","S05"),e.mark=c);e instanceof I|e instanceof Q&&d.forEach(function(a){return e.j.push(a)});b=a.g();d=!1;switch(b){case "*":e=new Ea(e,c);d=!0;a.next();break;case "+":e=new Ga(e,c);d=!0;a.next();break;case "?":e=new Da(e,c),a.next(),Z(a,e)}d&&(b==a.g()?(a.next(),Z(a,e),a=new Ha(dc(a),null),Fa(e,a)):Z(a,e));return e}
function fc(a){a.B("(","Invalid bracketed syntax");Z(a);var b=bc(a);a.B(")","Invalid bracketed syntax");Z(a);return b}function Zb(a,b){a.next();var c,d=Rb(a,b);for(c=a.next();c==b;)d+=b,a.next(),d+=Rb(a,b),c=a.next();0==d.length&&a.i("A literal string may not be empty","G00");d.includes("\n")&&a.i("A literal string may not contain a linebreak","S11");b=new E(d,null,b);Z(a,b);return b}
function gc(a){var b="";a.B("#","Invalid hex syntax");for(var c=a.g();/[0-9]|[A-F]|[a-f]/.test(c);)b+=c,c=a.next();""==b&&a.i("An encoded character must have one or more hexadecimal digits following the # character","S06");c=parseInt(b,16);var d=c%65536;1114111<c&&a.i("An encoded character must have a hexadecimal value within the Unicode point range","S07");(55296<c&&57343>=c||65534==d||65535==d)&&a.i("An encoded character must not denote a Unicode noncharacter or surrogate code point","S08");try{String.fromCodePoint(c)}catch(e){a.i("An encoded character must have a hexadecimal value within the Unicode point range",
"S0Z7")}b=new Aa(b,null);Z(a,b);return b}function ec(a){var b=a.g();if("#"==b)return a=gc(a),new G(a.text,!0);a=Zb(a,b);return new G(a.value,!1)}function ic(a){var b=$b(a);b=new I(b,null);Z(a,b);return b}
function hc(a,b){b=b?new Sa(null):new Ta(null);a.B("[","Invalid set syntax");Z(a,b);var c=jc(a);if(!c)return c=a.g(),/\]/.test(c)||a.i("No closing square bracket on charset. Provided:'"+c+"'","G00"),a.next(),b;Z(a,c);b.add(c);for(c=a.g();/;|\|/.test(c);)a.next(),Z(a,b),c=jc(a),b.add(c),Z(a,c),c=a.g();/\]/.test(c)||a.i("No closing square bracket on charset. Provided:'"+c+"'","G00");a.next();Z(a,b);return b}
function jc(a){var b=a.g();if(/[A-Z]/.test(b)){var c=a.g();b=a.next();if(/[a-z]/.test(b)||"L"==c&&"C"==b)c+=b,b=a.next(),/[A-Za-z]/.test(b)&&a.i("A Unicode character category code must match [A-Z][a-z]?. Provided: '"+c+b+"'","S10");/\s|;|\||\]/.test(b)||a.i("A Unicode character category code must match [A-Z][a-z]?. Provided: '"+c+b+"'","S10");c=new Va(c);Z(a,c);return c}c=kc(a);Z(a,c);b=a.g();return"-"==b?(a.next(),Z(a),(b=kc(a))||a.i("Missing 'to' character of a character range","G00"),new Wa(c,
b)):c}function kc(a){var b=a.g();if("#"==b){b="";a.B("#","Invalid hex syntax");for(var c=a.g();/[0-9]|[A-F]|[a-f]/.test(c);)b+=c,c=a.next();return new Ua(b)}if('"'==b||"'"==b){c=a.g();a.next();var d=Rb(a,c);for(b=a.next();b==c;)d+=c,a.next(),d+=Rb(a,c),b=a.next();0==d.length&&a.i("A member literal string may not be empty","G00");d.includes("\n")&&a.i("A literal string may not contain a linebreak","S11");return new S(d,c)}};
