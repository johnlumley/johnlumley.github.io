var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function m(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function n(a){if(!(a instanceof Array)){a=m(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ca;
if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={ha:!0},fa={};try{fa.__proto__=ea;da=fa.ha;break a}catch(a){}da=!1}ca=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ca;
function r(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.ja=b.prototype}
function ia(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}
var ja="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ka="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function u(a,b){if(b){var c=ka;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ja(c,a,{configurable:!0,writable:!0,value:b})}}
u("String.prototype.repeat",function(a){return a?a:function(a){var b=ia(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}});
u("String.fromCodePoint",function(a){return a?a:function(a){for(var b="",d=0;d<arguments.length;d++){var e=Number(arguments[d]);if(0>e||1114111<e||e!==Math.floor(e))throw new RangeError("invalid_code_point "+e);65535>=e?b+=String.fromCharCode(e):(e-=65536,b+=String.fromCharCode(e>>>10&1023|55296),b+=String.fromCharCode(e&1023|56320))}return b}});
u("String.prototype.codePointAt",function(a){return a?a:function(a){var b=ia(this,null,"codePointAt"),d=b.length;a=Number(a)||0;if(0<=a&&a<d){a|=0;var e=b.charCodeAt(a);if(55296>e||56319<e||a+1===d)return e;a=b.charCodeAt(a+1);return 56320>a||57343<a?e:1024*(e-55296)+a+9216}}});u("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});
u("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var g=b[c];if(g===a||Object.is(g,a))return!0}return!1}});u("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==ia(this,a,"includes").indexOf(a,c||0)}});function la(){la=function(){};ka.Symbol||(ka.Symbol=oa)}var oa=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function pa(){la();var a=ka.Symbol.iterator;a||(a=ka.Symbol.iterator=ka.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ja(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return qa(aa(this))}});pa=function(){}}function qa(a){pa();a={next:a};a[ka.Symbol.iterator]=function(){return this};return a}function w(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
u("WeakMap",function(a){function b(a){this.a=(k+=Math.random()+1).toString();if(a){a=m(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(){}function d(a){w(a,g)||ja(a,g,{value:new c})}function e(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof c)return a;d(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==
d.get(c)}catch(p){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var k=0;b.prototype.set=function(a,b){d(a);if(!w(a,g))throw Error("WeakMap key fail: "+a);a[g][this.a]=b;return this};b.prototype.get=function(a){return w(a,g)?a[g][this.a]:void 0};b.prototype.has=function(a){return w(a,g)&&w(a[g],this.a)};b.prototype.delete=function(a){return w(a,g)&&w(a[g],this.a)?delete a[g][this.a]:!1};return b});
u("Map",function(a){function b(){var a={};return a.D=a.next=a.head=a}function c(a,b){var c=a.a;return qa(function(){if(c){for(;c.head!=a.a;)c=c.D;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})}function d(a,b){var c=b&&typeof b;"object"==c||"function"==c?g.has(b)?c=g.get(b):(c=""+ ++k,g.set(b,c)):c="p_"+b;var d=a.b[c];if(d&&w(a.b,c))for(a=0;a<d.length;a++){var e=d[a];if(b!==b&&e.key!==e.key||b===e.key)return{id:c,list:d,index:a,u:e}}return{id:c,list:d,
index:-1,u:void 0}}function e(a){this.b={};this.a=b();this.size=0;if(a){a=m(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(m([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||
"t"!=e.value[1]||!d.next().done?!1:!0}catch(q){return!1}}())return a;pa();var g=new WeakMap;e.prototype.set=function(a,b){a=0===a?0:a;var c=d(this,a);c.list||(c.list=this.b[c.id]=[]);c.u?c.u.value=b:(c.u={next:this.a,D:this.a.D,head:this.a,key:a,value:b},c.list.push(c.u),this.a.D.next=c.u,this.a.D=c.u,this.size++);return this};e.prototype.delete=function(a){a=d(this,a);return a.u&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.b[a.id],a.u.D.next=a.u.next,a.u.next.D=a.u.D,a.u.head=null,
this.size--,!0):!1};e.prototype.clear=function(){this.b={};this.a=this.a.D=b();this.size=0};e.prototype.has=function(a){return!!d(this,a).u};e.prototype.get=function(a){return(a=d(this,a).u)&&a.value};e.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return c(this,function(a){return a.key})};e.prototype.values=function(){return c(this,function(a){return a.value})};e.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=
d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var k=0;return e});
u("Set",function(a){function b(a){this.a=new Map;if(a){a=m(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.a.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a(m([b]));if(!d.has(b)||1!=d.size||d.add(b)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),g=e.next();if(g.done||g.value[0]!=b||g.value[1]!=b)return!1;g=e.next();return g.done||g.value[0]==b||4!=g.value[0].x||
g.value[1]!=g.value[0]?!1:e.next().done}catch(k){return!1}}())return a;pa();b.prototype.add=function(a){a=0===a?0:a;this.a.set(a,a);this.size=this.a.size;return this};b.prototype.delete=function(a){a=this.a.delete(a);this.size=this.a.size;return a};b.prototype.clear=function(){this.a.clear();this.size=0};b.prototype.has=function(a){return this.a.has(a)};b.prototype.entries=function(){return this.a.entries()};b.prototype.values=function(){return this.a.values()};b.prototype.keys=b.prototype.values;
b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.a.forEach(function(d){return a.call(b,d,d,c)})};return b});u("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=ia(this,a,"startsWith"),e=b.length,g=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var k=0;k<g&&c<e;)if(b[c++]!=a[k++])return!1;return k>=g}});
function x(a){var b;a.hasAttribute("mark")&&(b=a.getAttribute("mark"));a.hasAttribute("tmark")&&(b=a.getAttribute("tmark"));switch(a.nodeName){case "prolog":return new ra(new sa(a.firstElementChild.textContent));case "version":return new sa(a.textContent);case "pragma":return new ta(a.getAttribute("name"));case "rule":return new y(a.getAttribute("name"),ua(a.children),b);case "alts":return ua(a.children);case "alt":b=new z;a=m(a.children);for(var c=a.next();!c.done;c=a.next())b.add(x(c.value));return b;
case "comment":return va(a);case "literal":return a.hasAttribute("string")?a=new A(a.getAttribute("string"),b):a.hasAttribute("hex")?(a=a.getAttribute("hex"),/^[A-Fa-f0-9]+$/.test(a)||B("literal/@hex in the XML syntax must be a valid hexadecimal number. Provided:'"+a+"'","S06"),a=new wa(a,b)):(B("<literal/> in the XML syntax must have one of @string|@hex"),a=void 0),a;case "insertion":return a.hasAttribute("string")?a=new C(a.getAttribute("string"),!1):a.hasAttribute("hex")?a=new C(a.getAttribute("hex"),
!0):(B("<insertion/> in the XML syntax must have one of @string|@hex"),a=void 0),a;case "inclusion":return xa(a,!1,b);case "exclusion":return xa(a,!0,b);case "member":return ya(a);case "nonterminal":return new D(a.getAttribute("name"),b);case "option":return new za(x(a.firstElementChild),b);case "repeat0":return b=new E(x(a.firstElementChild),b),2==a.children.length&&Aa(b,x(a.children[1])),b;case "repeat1":return b=new Ba(x(a.firstElementChild),b),2==a.children.length&&Aa(b,x(a.children[1])),b;case "sep":return new Ca(x(a.firstElementChild),
b);default:B("Unknown element in ixml tree:"+a.nodeName)}}function ra(a){this.version=a}ra.prototype.f=function(a){var b=a.ownerDocument.createElement("prolog");this.version&&this.version.f(b);a.append(b)};ra.prototype.flat=function(){var a="";this.version&&(a+=this.version.flat());return a};function sa(a){this.version=a;this.a=[]}sa.prototype.f=function(a){var b=a.ownerDocument.createElement("version");b.setAttribute("string",this.version);a.append(b);this.a.forEach(function(a){return a.f(b)})};
sa.prototype.flat=function(){return'ixml version "'+this.version+'".'};function ta(a){this.name=a}ta.prototype.f=function(a){var b=a.ownerDocument.createElement("pragma");b.setAttribute("name",this.name);a.append(b)};ta.prototype.flat=function(){return"["+this.name+"]"};function G(a){this.mark=a;this.a=[];this.G=!1}G.prototype.flat=function(a){return this.mark?this.mark:void 0===a?"":a};G.prototype.f=function(a){this.mark&&a.setAttribute("mark",this.mark)};
function Da(a){var b="";a.a.forEach(function(a){return b+=a.flat()});return b}function y(a,b,c){G.call(this,c);this.name=a;this.definition=b;this.definition.l="| ";this.definition.ea=!1;this.a=[];this.ga=this.lineNumber=this.b=null}r(y,G);y.prototype.F=function(a){this.a.push(a)};
y.prototype.f=function(a){var b=a.ownerDocument.createElement("rule");G.prototype.f.call(this,b);b.setAttribute("name",this.name);this.G&&b.setAttributeNS("http://invisiblexml.org/NS","ixml:artifact","true");this.b&&this.b.f(b);this.a.forEach(function(a){return a.f(b)});a.append(b);this.definition.f(b,!0)};y.prototype.s=function(a){this.definition.s(a)};
y.prototype.flat=function(a){var b="\n"+" ".repeat(a-this.name.length)+G.prototype.flat.call(this," ")+this.name+": ";this.a.forEach(function(a){return b+=a.flat()});50<this.definition.flat().length&&(this.definition.l="|\n"+" ".repeat(a+3));return b+this.definition.flat()+". "};function H(a){this.c=a}function va(a){var b=[];a=m(a.childNodes);for(var c=a.next();!c.done;c=a.next())c=c.value,c instanceof Element?b.push(va(c)):b.push(c.textContent);return new H(b)}
H.prototype.f=function(a){var b=a.ownerDocument.createElement("comment");this.c.forEach(function(a){a instanceof H?a.f(b):b.append(new Text(a))});a.append(b)};H.prototype.flat=function(){var a="{";this.c.forEach(function(b){a=b instanceof H?a+b.flat():a+b});return a+"}"};function Ea(a){G.call(this,a);this.l=this.g=null;this.c=[];this.b=[];this.ea=!1}r(Ea,G);f=Ea.prototype;f.add=function(a){this.c.push(a);this.b.push(a)};f.unshift=function(a){this.c.unshift(a);this.b.unshift(a)};f.F=function(a){this.b.push(a)};
function Fa(a,b,c){var d=a.c.indexOf(b);a.c.splice.apply(a.c,[d,1].concat(n(c)));d=a.b.indexOf(b);a.b.splice.apply(a.b,[d,1].concat(n(c)))}f.replace=function(a,b){var c=this.c.indexOf(a);this.c[c]=b;c=this.b.indexOf(a);this.b[c]=b};f.s=function(a,b){var c=this;a(this,b);this.c.forEach(function(b){return b.s(a,c)})};f.display=function(){return"container"};f.f=function(a,b){var c=a;b||(c=a.ownerDocument.createElement(this.g),a.append(c));a=m(this.b);for(b=a.next();!b.done;b=a.next())b.value.f(c,!1)};
f.flat=function(){var a=this;if(1==this.c.length)return this.c[0].flat();var b="";this.b.forEach(function(c,d){b+=c.flat();!(c instanceof H)&&d<a.b.length-1&&(b+=a.l)});return this.ea?"("+b+")":b};function I(){Ea.call(this,null);this.g="alts";this.l="|";this.ea=!0}r(I,Ea);function ua(a){var b=new I;a=m(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c=new z;b.add(c);d=m(d.children);for(var e=d.next();!e.done;e=d.next())c.add(x(e.value))}return b}I.prototype.display=function(){return"()"};
function z(){Ea.call(this,null);this.g="alt";this.l=","}r(z,Ea);function J(){I.call(this);this.add(new z)}r(J,I);J.prototype.f=function(a){I.prototype.f.call(this,a,!0)};function M(a,b){G.call(this,b);this.j=a;this.l=null;this.b="";this.a=[];this.m=this.g=null}r(M,G);function Aa(a,b){a.l=b;a.b+="-sep"}f=M.prototype;f.replace=function(a,b){this.j===a&&(this.j=b)};f.C=function(){return[]};f.aa=function(a){return this.C(a,void 0)};f.F=function(a){this.a.push(a)};
function N(a,b){if(a.g)return a.g+b;a.g=a.j instanceof D?a.j.w:"Mult";return a.g+b}f.s=function(a,b){a(this,b);this.j.s(a,this);this.l&&this.l.s(a,this)};f.f=function(a){var b=a;b=a.ownerDocument.createElement(this.m);a.append(b);this.j.f(b);this.a.forEach(function(a){return a.f(b)});this.l&&this.l.f(b)};f.flat=function(a){var b=this.j.flat()+a;this.l?(b+=a,this.a.forEach(function(a){return b+=a.flat()}),b+=this.l.flat()):this.a.forEach(function(a){return b+=a.flat()});return b};
function Ga(a,b){var c=new I;if(a.j instanceof I)a.j.c.forEach(function(a){d=new z;a.c.forEach(function(a){return d.add(a)});d.add(new D(b,null));c.add(d)});else{var d=new z;d.add(a.j);d.add(new D(b,null));c.add(d)}return c}function za(a,b){M.call(this,a,b);this.m="option";this.b="-option"}r(za,M);
za.prototype.C=function(a,b){a=(b?b:N(this,a))+this.b;var c=new I;this.j instanceof I?this.j.c.forEach(function(a){return c.add(a)}):(b=new z,b.add(this.j),c.add(b));b=new z;b.add(new J);c.add(b);a=new y(a,c,"-");a.G=!0;return[a]};za.prototype.flat=function(){return M.prototype.flat.call(this,"?")};function E(a,b){M.call(this,a,b);this.m="repeat0";this.b="-star"}r(E,M);E.prototype.aa=function(a){return this.l?Ha(this,a):this.C(a)};
E.prototype.C=function(a){if(this.l)return Ha(this,a);a=N(this,a)+this.b;var b=Ga(this,a),c=new z;c.add(new J);b.add(c);a=new y(a,b,"-");a.G=!0;return[a]};function Ha(a,b){N(a,b);var c=N(a,b)+"-plus";N(a,b);var d=new Ba(a.j,null);d.l=a.l;c=new za(new D(c,null),null);c.b="-star-sep";var e=c.C(b,N(a,b));d.C(b).forEach(function(a){return e.push(a)});return e}E.prototype.flat=function(){return M.prototype.flat.call(this,"*")};function Ba(a,b){M.call(this,a,b);this.m="repeat1";this.b="-plus"}r(Ba,M);
Ba.prototype.aa=function(a){a=N(this,a)+this.b;var b=this.l,c=new I,d=new z;d.add(this.j);b&&d.add(b.j);d.add(new D(a,null));c.add(d);b=new z;b.add(this.j);c.unshift(b);a=new y(a,c,"-");a.G=!0;return[a]};
Ba.prototype.C=function(a){if(this.l){var b=N(this,a)+this.b,c=N(this,a)+"-star";c=Ga(this,c);var d=new I,e=new z;e.add(this.l.j);e.add(this.j);d.add(e);d=new E(d,null);d.g=this.g;a=d.C(a);b=new y(b,c,"-");b.G=!0;a.unshift(b);return a}b=N(this,a)+this.b;c=N(this,a)+"-star";c=Ga(this,c);a=(new E(this.j,null)).C(a);b=new y(b,c,"-");b.G=!0;a.unshift(b);return a};Ba.prototype.flat=function(){return M.prototype.flat.call(this,"+")};function Ca(a,b){M.call(this,a,b);this.m="sep";this.b="-sep"}r(Ca,M);
Ca.prototype.flat=function(){return this.j.flat()};function Q(a){G.call(this,a);this.a=[]}r(Q,G);Q.prototype.f=function(a){this.mark&&a.setAttribute("tmark",this.mark);this.a.forEach(function(b){return b.f(a)})};Q.prototype.F=function(a){this.a.push(a)};Q.prototype.s=function(a,b){a(this,b)};Q.prototype.matches=function(){return!1};function D(a,b){G.call(this,b);this.w=a;this.c=[];this.a=[]}r(D,G);f=D.prototype;f.s=function(a,b){a(this,b)};f.display=function(){return G.prototype.flat.call(this)+this.w};
f.f=function(a){var b=a.ownerDocument.createElement("nonterminal");G.prototype.f.call(this,b);b.setAttribute("name",this.w);a.append(b);this.a.forEach(function(a){return a.f(b)})};f.flat=function(){return G.prototype.flat.call(this)+this.w+Da(this)};f.F=function(a){this.a.push(a)};function C(a,b){this.a=b;this.text=a;this.value=b?String.fromCodePoint(parseInt(a,16)):a}C.prototype.s=function(a,b){a(this,b)};
C.prototype.display=function(){return"+"+(this.a?"#"+this.text:'"'+this.value.replaceAll('"','""')+'"')};C.prototype.f=function(a){var b=a.ownerDocument.createElement("insertion");b.setAttribute(this.a?"hex":"string",this.text);a.append(b)};C.prototype.flat=function(){return this.display()};function A(a,b){Q.call(this,b);this.value=a}r(A,Q);A.prototype.matches=function(a){return this.value==a};A.prototype.display=function(){return Q.prototype.flat.call(this)+'"'+this.value.replaceAll('"','""')+'"'};
A.prototype.f=function(a){var b=a.ownerDocument.createElement("literal");Q.prototype.f.call(this,b);b.setAttribute("string",this.value);a.append(b)};A.prototype.flat=function(){return Q.prototype.flat.call(this)+'"'+this.value.replaceAll('"','""')+'"'+Da(this)};function wa(a,b){Q.call(this,b);this.text=a;this.b=parseInt(a,16);try{this.value=String.fromCodePoint(this.b)}catch(c){B("encoded character is not a valid Unicode point. Provided:'"+a+"'","S06")}}r(wa,Q);
wa.prototype.matches=function(a){return this.b==a.codePointAt(0)};wa.prototype.f=function(a){var b=a.ownerDocument.createElement("literal");Q.prototype.f.call(this,b);b.setAttribute("hex",this.text);a.append(b)};wa.prototype.display=function(){return Q.prototype.flat.call(this)+"#"+this.text};wa.prototype.flat=function(){return Q.prototype.flat.call(this)+"#"+this.text+Da(this)};function R(a){Q.call(this,a);this.c=[];this.b=[];this.g="charset"}r(R,Q);
function xa(a,b,c){b=b?new Ia(c):new Ja(c);a=m(a.children);for(c=a.next();!c.done;c=a.next())b.add(x(c.value));return b}f=R.prototype;f.add=function(a){this.c.push(a);this.b.push(a)};f.F=function(a){this.b.push(a)};f.s=function(a){this.c.forEach(function(b){return b.s(a)})};f.f=function(a){var b=a.ownerDocument.createElement(this.g);Q.prototype.f.call(this,b);a.append(b);a=m(this.b);for(var c=a.next();!c.done;c=a.next())c.value.f(b,!1)};
f.matches=function(a){for(var b=m(this.c),c=b.next();!c.done;c=b.next())if(c.value.matches(a))return!0;return!1};f.display=function(){return"["+this.c.map(function(a){return a.display()}).join(";")+"]"};f.flat=function(){var a=this,b=Q.prototype.flat.call(this)+("exclusion"==this.g?"~":"")+"[";this.b.forEach(function(c,d){b+=c.flat();!(c instanceof H)&&d<a.b.length-1&&(b+=";")});return b+="]"+Da(this)};function Ja(a){R.call(this,a);this.g="inclusion"}r(Ja,R);
function Ia(a){R.call(this,a);this.g="exclusion"}r(Ia,R);Ia.prototype.matches=function(a){return!R.prototype.matches.call(this,a)};Ia.prototype.display=function(){return"~"+R.prototype.display.call(this)};function S(){this.b=[];this.a=this.value=null}
function ya(a){if(a.hasAttribute("string"))return new T(a.getAttribute("string"));if(a.hasAttribute("hex"))return new Ka(a.getAttribute("hex"));if(a.hasAttribute("code"))return new La(a.getAttribute("code"));if(a.hasAttribute("from")){var b=a.getAttribute("from");a=a.getAttribute("to");return new Na("#"==b[0]?new Ka(b.substring(1)):new T(b),"#"==a[0]?new Ka(a.substring(1)):new T(a))}B("<member/> in XML syntax must have one of @string|@hex|@code|(@from,@to)")}f=S.prototype;
f.s=function(a,b){a(this,b)};f.display=function(){return this.value};f.F=function(a){this.b.push(a)};f.f=function(a){var b=a.ownerDocument.createElement("member");b.setAttribute(this.a,this.value);a.append(b);this.b.forEach(function(a){return a.f(b)})};f.flat=function(){return this.b.map(function(a){return a.flat()}).join("")};function T(a){S.call(this);this.value=a;this.a="string"}r(T,S);T.prototype.$=function(){return this.value.codePointAt(0)};T.prototype.matches=function(a){return this.value.includes(a)};
T.prototype.flat=function(){return'"'+this.value+'"'+S.prototype.flat.call(this)};T.prototype.ba=function(){return this.value};function Ka(a){S.call(this);this.value=a;this.g=parseInt(a,16);this.a="hex"}r(Ka,S);f=Ka.prototype;f.$=function(){return this.g};f.matches=function(a){return this.g==a.codePointAt(0)};f.display=function(){return this.flat()};f.flat=function(){return"#"+this.value+S.prototype.flat.call(this)};f.ba=function(){return"#"+this.value};
function Na(a,b){S.call(this);(a instanceof T&&1!=a.value.length||b instanceof T&&1!=b.value.length)&&B("The start and end of a charset range must each be exactly one character","S09");this.m=a;this.R=b;this.g=a.$();this.M=b.$();this.M<=this.g&&B("The start character of a charset range must have a code point value less than that of the end","S09")}r(Na,S);Na.prototype.matches=function(a){a=a.codePointAt(0);return this.g<=a&&a<=this.M};Na.prototype.display=function(){return this.flat()};
Na.prototype.f=function(a){var b=a.ownerDocument.createElement("member");b.setAttribute("from",this.m.ba());b.setAttribute("to",this.R.ba());this.b.forEach(function(a){return a.f(b)});a.append(b)};Na.prototype.flat=function(){return this.m.flat()+"-"+this.R.flat()+S.prototype.flat.call(this)};function La(a){S.call(this);this.value=a;try{this.g=new RegExp("\\p{"+a+"}","u")}catch(b){B("'"+a+"' is not a valid Unicode character class","S10")}this.a="code"}r(La,S);La.prototype.matches=function(a){return this.g.test(a)};
La.prototype.flat=function(){return this.value+S.prototype.flat.call(this)};function Oa(a,b,c,d,e,g){this.name=a;this.J=null;this.ended=c>=d.length;this.origin=b;this.position=c;this.o=0;this.c=d;this.index=0;this.V=e;this.a=g;this.source=this.right=this.left=null}f=Oa.prototype;f.L=function(){var a=new Oa(this.name,this.origin,this.position+1,this.c,this.V,this.a);a.o=this.o;a.J=this.J;return a};function Ra(a,b,c){if(null==c||void 0==c)c=b.position;return a.name==b.name&&a.V==b.V&&a.position==c&&a.origin==b.origin}function V(a){return a.c[a.position]}
function Sa(a){return a.c[a.position]instanceof Q||a.c[a.position]instanceof C}f.matches=function(a){var b=this.c[this.position];return b instanceof Q&&b.matches(a)};f.X=function(a){var b=this.c[this.position];return b instanceof D&&a.includes(b.w)};function Ta(a){return a.position>=a.c.length}function Ua(a,b,c,d,e){a.source=new Va(b,c,d,e)}
f.display=function(a){var b=this,c="("+this.index+")"+" ".repeat(void 0===a?0:a);c+=this.name+"\u2192";this.c.forEach(function(a,e){c+=(e==b.position?"\u25cf":"")+a.display()+(e<b.c.length-1?",":"")});this.position>=this.c.length&&(c+="\u25cf");return c};
f.f=function(a){function b(b){d=a.ownerDocument.createElement("td");var e=a.ownerDocument.createElement("pre");var k="description sppf";b instanceof Wa&&(k+=" derivation");e.setAttribute("class",k);b&&e.append(new Text(b.display()));d.append(e);c.append(d)}var c=a.ownerDocument.createElement("tr");0==this.origin&&Ta(this)&&c.setAttribute("class","finished");a.append(c);var d=a.ownerDocument.createElement("td");d.append(new Text(""+this.index));c.append(d);d=a.ownerDocument.createElement("td");d.append(new Text(this.V));
c.append(d);d=a.ownerDocument.createElement("td");d.append(new Text(""+this.o));c.append(d);d=a.ownerDocument.createElement("td");d.setAttribute("class","showDot");d.append(new Text(this.display()));c.append(d);d=a.ownerDocument.createElement("td");d.append(new Text(this.origin));c.append(d);d=a.ownerDocument.createElement("td");d.setAttribute("class","description");this.source?d.append(new Text(this.source.display())):d.append(new Text(this.a));c.append(d);b(this.left);b(this.right);return c};
function Xa(a,b){var c="";a.left&&(a.left instanceof Oa||B("left not a state:"+a.left),c+=Xa(a.left,b));a.right&&(c+=Xa(a.right,b));Sa(a)&&"-"!=V(a).mark&&(c+=V(a)instanceof C?V(a).value:Ya(b[a.o]));return c}
f.K=function(a,b,c,d,e,g){function k(d,h){return d?d.K(a,b,c,h,e,g):[]}var h=this.o,t=this.c[this.position-1]?this.c[this.position-1].mark:null,v=k(this.left,t),p=k(this.right,t);if(Ta(this)){h=this.name;d||(d=b.get(h).mark);t=null;g&&!b.get(h).G&&(t=d,d="^");d||(d="^");switch(d){case "^":(new RegExp(/\w(\w|-)*/,"u")).test(h)||B("'"+h+"' is not a valid name for an XML element","D03");var q=a.createElement(h);t&&q.setAttributeNS("http://invisiblexml.org/NS","ixml:mark",t);break;case "@":"xmlns"==h&&
B("'xmlns' is not a valid name for an attribute","D07");q=a.createAttribute(h);h="";h=Xa(this,c);q.value=h;break;case "+":h=this.c[this.position-1].value,Ya(h),q=new Text(h)}if(v instanceof W){var l=new W;if("-"==d){d=m(v.c);for(h=d.next();!h.done;h=d.next())if(t=h.value,p instanceof W){var K=m(p.c);for(h=K.next();!h.done;h=K.next())l.add(t.concat(h.value))}else l.add(t.concat(X(p)));return l}v.c.forEach(function(a){var b=q.cloneNode();if(b instanceof Element)if(p instanceof W){var c=m(p.c);for(b=
c.next();!b.done;b=c.next()){var d=b.value;b=q.cloneNode();Y(a,b,!0);Y(d,b,!0);l.add([b])}}else Y(a,b,!0),Y(p,b,!0),l.add([b]);else l.add(a.concat([b],X(p)))});return l}if(p instanceof W){l=new W;if("-"==d)return p.c.forEach(function(a){return l.add(X(v).concat(a))}),l;p.c.forEach(function(a){var b=q.cloneNode();if(b instanceof Element){var c=[];a.forEach(function(a,b){Array.isArray(a)&&c.push(b)});var d=c.length;if(0<d)for(var e={O:0};e.O<d;e={O:e.O},e.O++)b=q.cloneNode(),Y(v,b,!0),a.forEach(function(a){return function(d,
e){Array.isArray(d)&&c[a.O]!=e||Y(d,b,!0)}}(e)),l.add([b]);else Y(v,b,!0),Y(a,b,!0),l.add([b])}else l.add(X(v).concat([b],a))});return l}switch(d){case "^":return Y(v,q),Y(p,q),[q];case "-":return v.concat(p);default:return[q]}}else{var P=[];Sa(this)&&(d=V(this)?V(this).mark?V(this).mark:"^":"-",V(this)instanceof C?(d=V(this).value,Ya(d),g?(h=a.createElementNS("http://invisiblexml.org/NS","ixml:insertion"),h.setAttribute("string",d),P.push(h)):P.push(new Text(d))):"^"==d&&P.push(new Text(Ya(c[h]))));
if(p instanceof W){l=new W;d=m(p.c);for(h=d.next();!h.done;h=d.next())if(h=h.value,v instanceof W)for(t=m(v.c),K=t.next();!K.done;K=t.next())l.add(K.value.concat(h));else l.add(X(v).concat(h));return l}if(v instanceof W)return l=new W,v.c.forEach(function(a){return l.add(a.concat(X(p),P))}),l;d=v.concat(p);h=0<d.length?d[d.length-1]:null;return P[0]instanceof Text&&h instanceof Text?(h.textContent+=P[0].textContent,d):d.concat(P)}};
function Ya(a){for(var b=m([].concat(n(a))),c=b.next();!c.done;c=b.next())c=c.value.codePointAt(0),(32>c&&![9,10,13].includes(c)||55295<c&&57344>c||65533<c&&65536>c||1114111<c)&&B("Character codepoint "+c+" in '"+a+"' is not a valid XML character","D04");return a}function Wa(a,b,c){this.left=a;this.right=b;this.next=c}
Wa.prototype.display=function(a){a=void 0===a?0:a;var b=" ".repeat(a);b+="DER:";this.left&&(b+=this.left.display(),b+="\n");this.right&&(b+=this.right.display(a+4),b+="\n");this.next&&(b+=" ".repeat(a)+"|OR|"+this.next.display(a+4));return b};
Wa.prototype.K=function(a,b,c,d,e,g){var k=this.left.K(a,b,c,null,e,g);d=this.right?this.right.K(a,b,c,null,e,g):[];if(this.next){var h=new W;d instanceof W?d.c.forEach(function(a){return h.add(X(k).concat(a))}):h.add(X(k).concat(X(d)));if(e)return h;a=this.next.K(a,b,c,null,!1,g);a instanceof W?a.c.forEach(function(a){return h.add(a)}):h.add(a);return h}return d instanceof W?d:k instanceof W?k:k.concat(d)};
function X(a){a instanceof W&&Array.isArray(a.c[0])&&B("Trying to add arrays in ambiguity:"+a.c[0]);return a instanceof W?a.c:a}function W(){this.c=[]}W.prototype.add=function(a){Array.isArray(a)&&Array.isArray(a[0])&&B("Adding an array to an ambiguity:"+a);this.c.push(a)};function Y(a,b,c){c=void 0===c?!1:c;Array.isArray(a)?a.forEach(function(a){return Za(a,b,c)}):Za(a,b,c)}
function Za(a,b,c){c=void 0===c?!1:c;Array.isArray(a)&&B("Internal error: node is array: "+a);c=c?a.cloneNode(!0):a;c instanceof Attr?(b.hasAttribute(a.name)&&B("Attempt to overwrite an existing attribute @"+c.name+" on element "+b.localName,"D02"),b.setAttributeNode(c)):c instanceof Text?(a=b.lastChild,a instanceof Text?a.textContent+=c.textContent:0<c.textContent.length&&b.append(c)):b.append(c)}
function $a(a,b,c){if(b||c)if(a.left||a.right)if(a.right)Ra(a.left,b)&&c&&a.right&&Ra(a.right,c)||(a.left=new Wa(b,c,new Wa(a.left,a.right,null)),a.right=null);else a:{for(var d=a.left;d;){if(Ra(d.left,b)&&c&&d.right&&Ra(d.right,c))break a;d=d.next}a.left=new Wa(b,c,a.left)}else a.left=b,a.right=c}function Va(a,b,c,d){this.type=a;this.a=b;this.b=c;this.g=d}
Va.prototype.display=function(){var a=this.type+" from ";null!=this.a&&(a+="("+this.a+")");null!=this.b&&(null!=this.a&&(a+=" and "),a+="S("+this.b+")("+this.g+") ");return a};function ab(a,b,c){this.B=[];this.b=a;this.A=b;this.m=c;this.H=c.H;this.g=new Map;this.a=[]}f=ab.prototype;f.add=function(a){this.B.push(a);a.index=this.B.length};function bb(a,b){return a.B.some(function(a){return Ra(a,b,a.position+1)})}function cb(a,b){return a.B.some(function(a){return Ra(a,b)})}
function fb(a,b){return a.B.filter(function(a){return Ra(a,b)})[0]}function gb(a,b,c){return a.B.filter(function(a){return a.name==b&&a.ended&&a.origin==c&&(!a.source||"scanned"!=a.source.type)})}f.L=function(){return new ab(this.b,this.A+1,this.m)};function hb(a,b){var c=a.H.get(b),d=c.definition.c.map(function(a,d){a=new Oa(b,0,0,a.c,d,"start rule");a.J=c;return a});d.forEach(function(b){return a.add(b)});ib(a,b,0);d.forEach(function(b){return a.a.push(b)})}
function ib(a,b,c){if(a.g.has(b))a.g.get(b).add(c);else{var d=new Set;d.add(c);a.g.set(b,d)}}function jb(a,b,c){return a.g.has(b)?a.g.get(b).has(c):!1}function kb(a){if(0==a.a.length)return!1;var b=a.a.shift();Ta(b)?lb(a,b,a.A):(b.c[b.position]instanceof D||b.c[b.position]instanceof J||b.c[b.position]instanceof C||"+"==b.c[b.position].mark)&&mb(a,b,a.A);return!0}function rb(a,b){var c=[];a=m(a.B);for(var d=a.next();!d.done;d=a.next())d=d.value,d.name==b&&Ta(d)&&0==d.origin&&c.push(d);return c}
function sb(a){return a.B.filter(function(a){return Sa(a)})}
function mb(a,b,c){var d=V(b);if(d instanceof J||d instanceof C||"+"==d.mark){var e=b.L();e.o=b.o;Ua(e,"predict",b.index,null,null);if(Ta(e)||"+"==d.mark||d instanceof C)Ua(e,"Apredict/complete",b.index,null,null),$a(e,b,null);cb(a,e)||(a.add(e),a.a.push(e))}else if(d instanceof D){var g=d.w;if(jb(a,g,b.origin))g==b.name&&c==b.origin&&b.position==b.c.length?B("Infinite ambiguity with production: "+b.name):(d=gb(a,g,b.origin),0==d.length&&(d=gb(a,g,c).filter(function(a){return a.c[a.position-1]instanceof
C})),d.forEach(function(c){e=b.L();e.o=b.o;Ua(e,"Known state predict/complete",b.index,a.A,c.index);$a(e,b,c);a.add(e);a.a.push(e)}));else{ib(a,g,b.origin);var k=a.H.get(g);k.definition.c.forEach(function(d,t){e=new Oa(g,c,0,d.c,t,"predict from ("+b.index+")");e.o=b.o;Ua(e,"predict",b.index,null,null);e.J=k;t=V(e);if(Ta(e)||t instanceof I)e=e.L(),e.o=b.o,Ua(e,"Bpredict/complete",b.index,null,null),t instanceof I||d instanceof z||d instanceof D||$a(e,b,null);cb(a,e)?(e.index=-fb(a,b).index,Ua(e,"Known state predict",
-b.index,null,null)):a.add(e);a.a.push(e)})}}}function lb(a,b,c){var d=b.name;a.m.S[b.origin].B.forEach(function(e){if(e.X([d],c)&&!bb(a,e)){var g=e.L();g.o=b.o;Ua(g,"complete",b.index,b.origin,e.index);if(cb(a,g)){var k=fb(a,g);$a(k,e,Ra(b,k)?null:b)}else a.add(g),$a(g,e,b);a.a.push(g)}})}function tb(a,b,c,d){var e=!1;d.B.forEach(function(g,k){if(g.matches(c)){e=!0;var h=g.L();g.o=b;h.o=b;Ua(h,"scanned",null,d.A,k+1);$a(h,g,null);a.add(h);a.a.push(h)}});return e}
f.display=function(){var a=document.implementation.createDocument("","",null);this.f(a);return a};f.countStates=function(){return this.B.length};
f.f=function(a){var b=this,c=a.createElement("table");a.append(c);var d=a.createElement("thead");c.append(d);var e=a.createElement("tr");d.append(e);var g=a.createElement("th");g.setAttribute("colspan","5");g.setAttribute("class","stateSpace");e.append(g);e="S("+this.A+"): "+(80<this.b.length?"":this.b.slice(0,this.A).join("")+"\u2022"+this.b.slice(this.A).join(""));if(0<this.A){var k=this.b[this.A-1].codePointAt(0);e+=" char '"+this.b[this.A-1]+"' (codepoint "+k+",#"+(new Number(k)).toString(16)+
")"}g.append(new Text(e));e=a.createElement("tr");d.append(e);d=a.createElement("td");d.setAttribute("colspan","3");e.append(d);var h=a.createElement("tbody");c.append(h);this.B.forEach(function(a){return a.f(h,b.A)})};
function ub(a){var b=this;this.version=1;this.c=[];this.a=[];this.start=null;this.H=new Map;a.forEach(function(a){a instanceof y?vb(b,a):(b.c.push(a),a instanceof ra&&a.version&&(b.version=a.version.version))});this.S=[];this.b=null;this.g=[];this.m={};this.compiled=!1;this.parseTime=this.compileTime=null}function vb(a,b){a.H.has(b.name)&&B("Adding productions for an already-defined non-terminal: "+b.name,"S03");a.a.push(b);a.c.push(b);a.H.set(b.name,b)}f=ub.prototype;
f.X=function(a,b){var c=[];a.s(function(a){a.w&&!b.has(a.w)&&(b.add(a.w),c.push(a.w))});return c};
function wb(a){a.start=a.a[0].name;var b=new Set;a.a.forEach(function(a){return b.add(a.name)});for(var c=new Set,d=m(a.a),e=d.next();!e.done;e=d.next())a.X(e.value,c);c=new Set([].concat(n(c)).filter(function(a){return!b.has(a)}));0<c.size&&B("No production rules for non-terminals: "+[].concat(n(c)).join(","),"S02");if(a.m.ia){var g=xb(a);a=new Set([].concat(n(b)).filter(function(a){return!g.has(a)}));0<a.size&&B("Unreachable production rules for non-terminals: "+[].concat(n(a)).join(","),"S002")}}
function xb(a){var b=new Set,c=a.a[0];b.add(c.name);c=[c.name];for(var d={};0<c.length;)d.P=[],c.forEach(function(c){return function(d){d=a.H.get(d);c.P=c.P.concat(a.X(d,b))}}(d)),c=d.P,d={P:d.P};return b}
f.compile=function(a){function b(b){return a instanceof SaxonJS.XdmMap?(b=SaxonJS.atom(b),a.containsKey(b)?a.get(b)[0].value:!1):a.hasOwn(b)?a[b]:!1}a.value&&(a=a.value);var c=performance.now(),d=b("twRewrites");this.m.ia=b("unreachable");wb(this);yb(this);zb(this,d);Ab(this);wb(this);this.compileTime=performance.now()-c;this.compiled=!0};
function yb(a){for(var b=[],c=m(a.a),d=c.next();!d.done;d=c.next())d.value.s(function(a,c){c&&a instanceof I&&(c.replace(a,new D("Alt"+b.length,null)),b.push(a))});b.forEach(function(b,c){b=new y("Alt"+c,b,"-");b.G=!0;vb(a,b)})}
function Ab(a){a=m(a.a);for(var b=a.next();!b.done;b=a.next())b.value.s(function(a,b){if(a instanceof z){var c=a.c.filter(function(a){return a instanceof A});b=m(c);for(c=b.next();!c.done;c=b.next()){var d=c.value,k=[],h=m(d.value);for(c=h.next();!c.done;c=h.next())k.push(new A(c.value,d.mark));c=a.c.indexOf(d);a.c.splice.apply(a.c,[c,1].concat(n(k)));c=a.b.indexOf(d);a.b.splice.apply(a.b,[c,1].concat(n(k)))}}else if(b&&a instanceof A&&"+"!=a.mark&&1<a.value.length){d=[];k=m(a.value);for(c=k.next();!c.done;c=
k.next())d.push(new A(c.value,a.mark));Fa(b,a,d)}})}function zb(a,b){for(var c=[],d=new Set,e={},g=m(a.a),k=g.next();!k.done;e={Y:e.Y},k=g.next())e.Y=k.value,e.Y.s(function(){return function(a,b){if(a instanceof M){var e=new D(N(a,c.length)+a.b,null);b.replace(a,e);d.has(e.w);c.push(a);d.add(e.w)}}}(e));0<c.length&&c.forEach(function(c,d){b?c.aa(d).forEach(function(b){vb(a,b)}):c.C(d).forEach(function(b){return vb(a,b)})})}function Bb(a,b){a.b=b;a.g=b.split(/\n/)}
function Cb(a,b){for(var c=1,d=1,e=0;e<b;e++)d++,/\n/.test(a.b[e])&&(c++,d=1);return{line:c,I:d}}
f.parse=function(a,b){function c(a){return b instanceof SaxonJS.XdmMap?(a=SaxonJS.atom(a),b.containsKey(a)?b.get(a)[0].value:!1):b.hasOwn(a)?b[a]:!1}function d(a){a.hasAttribute("xmlns:ixml")||a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:ixml","http://invisiblexml.org/NS")}function e(a){d(a);a.setAttributeNS("http://invisiblexml.org/NS","ixml:state","ambiguous")}function g(a){d(a);a.setAttributeNS("http://invisiblexml.org/NS","ixml:state","version-mismatch")}function k(a){var b=a[0];b instanceof
Attr&&B("An attribute node may not be the final parse result @"+b.name,"D05");b instanceof Text&&B("A text node may not be the final parse result: '"+b.textContent+"'","D06");1<a.length&&B("Multiple nodes may not be the final parse result:"+a.map(function(a){a:{switch(a.nodeType){case Node.ELEMENT_NODE:a="<"+a.tagName+"/>";break a;case Node.ATTRIBUTE_NODE:a="@"+a.name;break a;case Node.TEXT_NODE:a="'"+a.textContent+"'";break a}a=void 0}return a}),"D06")}b=void 0===b?{}:b;this.compiled||B("An IXML grammar must be compiled before being used to parse");
b.value&&(b=b.value);var h="1.0"!=this.version,t=performance.now(),v=[].concat(n(a));Bb(this,a);this.S=[];var p=0,q=new ab(v,p++,this);this.S.push(q);var l=null;hb(q,this.start);var K=!0,P=0;try{for(;K;){if(1E3<P++){B("Looping at start?");break}K=kb(q)}}catch(F){F.message&&"looping in process"!=F.message&&(l=F.message)}var ma=q;if(!l)for(var U={},O=0;O<v.length;U={T:U.T},O++){q=new ab(v,p++,this);this.S.push(q);if(!tb(q,O,v[O],ma)){p=Cb(this,O);l="Failure at line "+p.line+" column "+p.I+"\nGiven '"+
a[O]+"' (codepoint "+a[O].codePointAt(0)+"). Expecting one of:\n";U.T=new Set;sb(ma).forEach(function(a){return function(b){var c=V(b);c instanceof C||(b=b.J.lineNumber?" {#"+b.J.lineNumber+": "+b.J.ga+"}":" {generated rule:"+b.name+" (see compiled grammar)}",a.T.add("   "+c.display()+b))}}(U));l+=[].concat(n(U.T)).join(",\n");l+="\nInput:\n   "+this.g[p.line-1]+"\n   ";l+=" ".repeat(p.I-1)+"^\n";break}K=!0;P=0;try{for(;K;){if(1E3<P++){var db=Cb(this,O);B("Probable looping processing character '"+
v[O]+"' @ line "+db.line+", column "+db.I+"?");break}K=kb(q)}}catch(F){l=F.message;break}ma=q}a=performance.now()-t;U=c("justOne");O=c("suppressMarks");p=[];q=rb(q,this.start);if(!l&&0<q.length){ma=1<q.length;var L=document.implementation.createDocument("","",null);L=document.implementation.createDocument("","",null);try{for(var eb=m(q),Ma=eb.next();!Ma.done;Ma=eb.next()){var na=Ma.value.K(L,this.H,v,null,U,O);if(na instanceof W)for(var nb=m(na.c),Pa=nb.next();!Pa.done;Pa=nb.next()){var Qa=Pa.value;
e(Qa[0]);var ob=document.implementation.createDocument("","",null);p.push(ob);k(Qa);ob.append(Qa[0].cloneNode(!0));if(U)break}else{ma&&e(na[0]);h&&g(na[0]);var pb=document.implementation.createDocument("","",null);p.push(pb);k(na);pb.append(na[0].cloneNode(!0))}if(U)break}}catch(F){F.code?l={code:"string"==typeof F.code?F.code.substring(F.code.indexOf("}")+1):F.code,message:F.message}:l="Possible internal error:"+F.constructor.name+":"+F.message,q=[]}L=p[0]}else if(!l){l="\nEnd of input reached before parse completed.\nExpecting one of:\n    ";
var qb=new Set;sb(ma).forEach(function(a){var b=V(a);b instanceof C||qb.add(a.name+":"+b.display())});l+=[].concat(n(qb)).join(", ")+"\n"}h={parsed:0<q.length,tree:L,allTrees:p,states:this.S,parseTime:a,treeTime:performance.now()-t-a,compileTime:this.compileTime};l&&(h.failed=l,h.allTrees=null,t=L=document.implementation.createDocument("","",null),h.tree=t,L=t.createElement("ixml"),t.append(L),d(L),L.setAttributeNS("http://invisiblexml.org/NS","ixml:state","failed"),l.code?(h.failed=l.message,h["error-code"]=
l.code,L.setAttributeNS("http://invisiblexml.org/NS","ixml:error-code",l.code),L.append(new Text("\n"+l.message))):L.append(new Text("\n"+l)));return h};f.flat=function(){for(var a="",b=this.c.reduce(function(a,b){return b instanceof y&&b.name.length>a?b.name.length:a},0),c=m(this.c),d=c.next();!d.done;d=c.next())a+=d.value.flat(b);return a};f.display=function(a){if(a)return this.flat();a=document.implementation.createDocument("","",null);this.f(a);return a};
f.f=function(a){var b=a.createElement("ixml");this.start&&b.setAttribute("startTerm",this.start);a.append(b);a=m(this.c);for(var c=a.next();!c.done;c=a.next())c.value.f(b)};var Fb={compile:function(a,b){a instanceof Document?(a=Db(a),a.compile(b),b=a):(a=(new Eb).parse(a instanceof Node?a.textContent:a),a.compile(b),b=a);return b},parse:function(a){return a instanceof Document?Db(a):(new Eb).parse(a instanceof Node?a.textContent:a)},version:function(){return"1.0.1"}};window.jwiXML=function(){return Fb};function Gb(){this.g="";this.M=this.a=0;this.b=this.lineNumber=1;this.m=null;this.line="";this.R=null;this.fa=[]}f=Gb.prototype;f.W=function(){return this.a};f.da=function(){this.fa.push({offset:this.a,line:this.lineNumber,I:this.b})};f.ca=function(){var a=this.fa.pop();this.a=a.offset;this.lineNumber=a.line;this.b=a.I};f.U=function(a){for(;a--;)this.next()};f.h=function(){return this.g.charAt(this.a)};f.N=function(){return this.a<this.M};
f.next=function(){this.a==this.M&&B("End of input");this.a+=1;this.m=this.g.charAt(this.a);this.line+=this.m;/\n/.test(this.m)&&(this.lineNumber++,this.b=0,this.line="");this.b++;return this.m};f.matches=function(a){return this.g.substring(this.a).match(a)};f.location=function(){return{line:this.lineNumber,I:this.b}};function Hb(a){return(a=a.h())?"'"+a+"' (codepoint "+a.codePointAt(0)+")":"(no character)"}
f.v=function(a,b){a!=this.h()&&this.i((void 0===b?"":b)+"\nExpecting character:'"+a+"' - given: "+Hb(this),"G000");this.next()};f.Z=function(a,b){b=void 0===b?"":b;a.includes(this.h())||(a=a.split("").map(function(a){return"'"+a+"'"}).join(","),this.i(b+"\nExpecting one of "+a+" - given: "+Hb(this),"G000"));this.next()};
f.i=function(a,b){b=void 0===b?"ABCD":b;var c=this.location();a+=".\nNear "+("line "+this.lineNumber+", column "+this.b)+".\n";a+=this.R[c.line-1]+"\n";a+=" ".repeat(c.I-1)+"^\n";B(a,b)};function B(a,b){var c=void 0===c?null:c;a=new SaxonJS.XError(a,"Q{http://invisiblexml.org/NS}"+(void 0===b?"ABCD":b));c&&(a.ka=c.line);throw a;}function Eb(){this.b=this.a=null}f=Eb.prototype;f.i=function(a,b){this.a.i(a,void 0===b?"G000":b)};f.W=function(){return this.a.W()};f.N=function(){return this.a.N()};
f.h=function(){return this.a.h()};f.next=function(){return this.a.next()};f.v=function(a,b){return this.a.v(a,b)};f.Z=function(a,b){return this.a.Z(a,b)};f.matches=function(a){return this.a.matches(a)};f.da=function(){this.a.da()};f.ca=function(){this.a.ca()};f.U=function(a){this.a.U(a)};function Ib(a,b){for(var c="",d=a.h();d!=b;)c+=d,a.N()||a.i("Unterminated string "+b+"..."),d=a.next();return c}
f.parse=function(a){var b=performance.now();this.b=a;var c=new Gb;this.a=c;c.g=a;c.M=a.length;c.R=a.split(/\n/);a.startsWith("\n")&&c.lineNumber++;try{var d=Z(this);switch(this.h()){case "i":var e=Jb(this)}if(e){Z(this);var g=new ra(e)}else g=null;g&&d.push(g);for(a=[];this.N();)a.push(Kb(this)),this.N()&&(a=a.concat(Lb(this)));d=d.concat(a);d=d.concat(Z(this));var k=new ub(d);k.parseTime=performance.now()-b;return k}catch(h){if(h instanceof SaxonJS.XError)throw h;this.i(h.message,h.code)}};
function Db(a){var b=performance.now();a instanceof Document&&"ixml"==a.firstChild.nodeName||B("An ixml grammar in XML format must be supplied as a document-node(element(ixml))");var c=[];a=m(a.firstChild.children);for(var d=a.next();!d.done;d=a.next())c.push(x(d.value));c=new ub(c);c.parseTime=performance.now()-b;return c}
function Z(a,b){b=void 0===b?null:b;for(var c=[],d=a.h();/\s/.test(d);)d=a.next();"{"==d&&(c.push(Mb(a)),Z(a).forEach(function(a){return c.push(a)}));b&&c.forEach(function(a){return b.F(a)});return c}function Lb(a){var b=void 0===b?null:b;var c=a.h();if(/\s|\{/.test(c))return Z(a,b);a.i("Must have whitespace, given: '"+c+"' codepoint("+c.codePointAt(0)+")","S01")}
function Mb(a){var b=[],c="";a.v("{","Invalid comment syntax");for(var d=a.h();"}"!=d;)"{"==d?(""!=c&&b.push(c),b.push(Mb(a)),c="",d=a.h()):(c+=d,a.N()||a.i("Unterminated comment"),d=a.next());""!=c&&b.push(c);a.v("}","Invalid comment syntax");return new H(b)}
function Jb(a){a.da();var b=a.matches(/ixml/);if(b&&(a.U(b[0].length),/\s|\{/.test(a.h()))){var c=Lb(a);if(b=a.matches(/version/)){a.U(b[0].length);c=c.concat(Lb(a));/'|"/.test(a.h())||a.i("Invalid version declaration","G000");b=Nb(a,a.h());c=c.concat(Z(a));a.v(".","Invalid version declaration. ");var d=new sa(b.value);c.forEach(function(a){return d.a.push(a)});return d}}a.ca();return null}
function Ob(a){a.v("[","Invalid pragma syntax. ");var b=Pb(a);var c=a.h();":"==c&&(b+=c,a.next(),b+=Pb(a));a.v("]","Invalid pragma syntax. ");Z(a);return new ta(b)}
function Kb(a){var b=null,c=[],d=a.h(),e=a.W();if("["==d){var g=Ob(a);d=a.h()}/@|-|\^/.test(d)&&(b=d,d=a.next(),Z(a).forEach(function(a){return c.push(a)}));d=Pb(a);Z(a).forEach(function(a){return c.push(a)});a.Z(":=","Invalid rule syntax. Missing name-definition separator.");Z(a).forEach(function(a){return c.push(a)});var k=Qb(a);a.v(".","Invalid rule syntax. Missing rule terminator character.");var h=new y(d,k,b);h.ga=a.b.substring(e,a.W());g&&(h.b=g);c.forEach(function(a){return h.F(a)});h.lineNumber=
a.a.lineNumber;return h}function Pb(a){var b=a.h();(new RegExp(/\p{L}|_/,"u")).test(b)||a.i("'"+b+"' (codepoint "+b.codePointAt(0)+") is not a valid name character");var c=b;for(b=a.next();/\w|\-/.test(b);)c+=b,b=a.next();return c}function Qb(a){var b=new I,c=a.h(),d;/;|\|/.test(c)?d=new J:d=Rb(a);d&&b.add(d);for(c=a.h();/;|\|/.test(c);)a.next(),Z(a,b),c=a.h(),/;|\|/.test(c)?b.add(new J):(b.add(Rb(a)),Z(a,b),c=a.h());return b}
function Rb(a){var b=new z,c=Sb(a);c&&b.add(c);for(c=a.h();/,/.test(c);)a.next(),Z(a,b),(c=Sb(a))||a.i("Invalid start of term"),b.add(c),c=a.h();return b}
function Sb(a){var b=a.h(),c=null;/@|-|\^|\+/.test(b)&&(c=b,a.next(),Z(a),b=a.h());if("+"==c)return c=a.h(),"#"==c?(a=Tb(a),a=new C(a.text,!0)):(a=Nb(a,c),a=new C(a.value,!1)),a;switch(b){case "(":c&&a.i("No marker permitted on bracketed constructs (factor), given '"+c+"'","S006");a.v("(","Invalid bracketed syntax");Z(a);var d=Qb(a);a.v(")","Invalid bracketed syntax");Z(a);break;case ")":return null;case '"':d=Nb(a,b);break;case "'":d=Nb(a,b);break;case "#":d=Tb(a);break;case "[":d=Ub(a,!1);break;
case "~":a.next();Z(a);d=Ub(a,!0);break;case ".":break;default:d=Pb(a),d=new D(d,null),Z(a,d)}c&&(d instanceof Q&&"@"==c&&a.i("The only permitted mark for a terminal is '-', '+' or '^', given '"+c+"'","S04"),"+"!=c||d instanceof Q&&!(d instanceof R)||a.i("The insertion mark '+' is only permitted on quoted or encoded literals","S05"),d.mark=c);b=a.h();var e=!1;switch(b){case "*":d=new E(d,c);e=!0;a.next();break;case "+":d=new Ba(d,c);e=!0;a.next();break;case "?":d=new za(d,c),a.next(),Z(a,d)}e&&(b==
a.h()?(a.next(),Z(a,d),a=new Ca(Sb(a),null),Aa(d,a)):Z(a,d));return d}function Nb(a,b){a.next();var c,d=Ib(a,b);for(c=a.next();c==b;)d+=b,a.next(),d+=Ib(a,b),c=a.next();0==d.length&&a.i("A literal string may not be empty","G00");d.includes("\n")&&a.i("A literal string may not contain a linebreak","S11");b=new A(d,null);Z(a,b);return b}
function Tb(a){var b="";a.v("#","Invalid hex syntax");for(var c=a.h();/[0-9]|[A-F]|[a-f]/.test(c);)b+=c,c=a.next();""==b&&a.i("An encoded character must have one or more hexadecimal digits following the # character","S06");c=parseInt(b,16);var d=c%65536;1114111<c&&a.i("An encoded character must have a hexadecimal value within the Unicode point range","S07");(55296<c&&57343>=c||65534==d||65535==d)&&a.i("An encoded character must not denote a Unicode noncharacter or surrogate code point","S08");try{String.fromCodePoint(c)}catch(e){a.i("An encoded character must have a hexadecimal value within the Unicode point range",
"S0Z7")}b=new wa(b,null);Z(a,b);return b}function Ub(a,b){b=b?new Ia(null):new Ja(null);a.v("[","Invalid set syntax");Z(a,b);var c=Vb(a);if(!c)return c=a.h(),/\]/.test(c)||a.i("No closing square bracket on charset. Provided:'"+c+"'","G00"),a.next(),b;Z(a,c);b.add(c);for(c=a.h();/;|\|/.test(c);)a.next(),Z(a,b),c=Vb(a),b.add(c),Z(a,c),c=a.h();/\]/.test(c)||a.i("No closing square bracket on charset. Provided:'"+c+"'","G00");a.next();Z(a,b);return b}
function Vb(a){var b=a.h();if(/[A-Z]/.test(b)){var c=a.h();b=a.next();/[a-z]/.test(b)&&(c+=b,b=a.next(),/[A-Za-z]/.test(b)&&a.i("A Unicode character category code must match [A-Z][a-z]?. Provided: '"+c+b+"'","S10"));/\s|;|\||\]/.test(b)||a.i("A Unicode character category code must match [A-Z][a-z]?. Provided: '"+c+b+"'","S10");c=new La(c);Z(a,c);return c}c=Wb(a);Z(a,c);b=a.h();return"-"==b?(a.next(),Z(a),(b=Wb(a))||a.i("Missing 'to' character of a character range","G00"),new Na(c,b)):c}
function Wb(a){var b=a.h();if("#"==b){b="";a.v("#","Invalid hex syntax");for(var c=a.h();/[0-9]|[A-F]|[a-f]/.test(c);)b+=c,c=a.next();return new Ka(b)}if('"'==b||"'"==b){b="";c=a.h();for(var d=a.next();d!=c;)b+=d,d=a.next();a.next();return new T(b)}};
